(self.modernJsonp=self.modernJsonp||[]).push([["23256"],{894870:function(e,t,s){s.d(t,{q:()=>p});var n=s(667294),a=s(581722),r=s(312048),i=s(322830),l=s(935059),o=s(575820),d=s(966039),u=s(179664),c=s(513504);let p=()=>{let e=(0,r.TH)(),t=(0,l.Z)(),s=(0,a.I0)(),{getNuxSignals:p,selectedUseCases:_,selectedPins:m,shouldUseNewReducerState:h}=(0,u.u)(),g=h?p():(0,d.rQ)(_,m);return(0,n.useCallback)(()=>{let n=t.isAuth&&t.firstHomeFeedRequestAfterNux,a=(0,i.Z)({viewerIsPartner:t.isAuth&&t.isPartner,inNux:(n&&s((0,c.H5)(!1)),n),staticFeed:!!(e&&(e.pathname.includes("pwt_performance_testing")||void 0!==(0,o.mB)(e.search).pwt_performance_testing)),inNewsHub:e?.pathname.includes("news_hub")??!1});return{name:"UserHomefeedResource",options:g.length>0?{...a,nux_signals_map:g}:a}},[s,t,e,g])}},424367:function(e,t,s){s.d(t,{Z:()=>i});var n=s(501010),a=s(774838),r=s(739405);function i(){let{isAuthenticated:e}=(0,a.B)(),t=(0,r.ml)(),{checkExperiment:s}=(0,n.Z)();return{mWebCloseupRedesignEnabled:e&&t&&s("mweb_closeup_redesign").anyEnabled,mWebCloseupRedesignExpGroup:s("mweb_closeup_redesign").group}}},933442:function(e,t,s){s.d(t,{_:()=>l,p:()=>o});var n=s(667294),a=s(213491),r=s(785893);let{Provider:i,get:l}=(0,a.Z)("VisualShopContext");function o({children:e}){let[t,s]=(0,n.useState)({}),[a,l]=(0,n.useState)({}),o=(0,n.useRef)(0),d=(0,n.useRef)("");return(0,r.jsx)(i,{value:{cachedOneBarModules:t,setCachedOneBarModules:s,cachedDescriptorModules:a,setCachedDescriptorModules:l,imageContainerScrollTop:o,imageContainerScrollTopForPinId:d},children:e})}},214879:function(e,t,s){s.d(t,{Z:()=>a,v:()=>n});let n=()=>"undefined"!=typeof navigator&&"getInstalledRelatedApps"in navigator;async function a(){if(!n())return[];try{return await navigator.getInstalledRelatedApps()}catch(e){return[]}}},245563:function(e,t,s){s.d(t,{Z:()=>n});let n=e=>{let t=new Date(e);return new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate())}},465784:function(e,t,s){s.d(t,{ZP:()=>u,bN:()=>o,p4:()=>d});var n=s(686659),a=s(667294),r=s(739405),i=s(9065),l=s(785893);let o=(0,i.Z)(()=>s.e("44109").then(s.bind(s,551737)),{ssr:!1},e=>551737,"DesktopModal",e=>["44109"]),d=(0,i.Z)(()=>s.e("45718").then(s.bind(s,659546)),{ssr:!1},e=>659546,"MobileModal",e=>["45718"]);function u(e){(0,a.useEffect)(()=>{(0,n.Z)("Modal","/app/packages/gestaltExtensions/Modal.tsx")},[]);let t=(0,r.ZP)(),s=void 0===e.isOpen||e.isOpen;if("desktop"===t&&s){let{isOpen:t,mobileAccessibilityCloseIconLabel:s,mobileAllowScroll:n,mobileHeadingSize:a,mobileHideCloseIcon:r,mobileIsFullscreen:i,mobileIsSlideUp:d,mobileTopOffset:u,type:c,mobileIsFooter:p,zIndex:_,...m}=e;return(0,l.jsx)(o,{...m})}let{allowMediaPlay:i,allowScroll:u,role:c,size:p,_dangerouslyDisableScrollBoundaryContainer:_,layerZIndex:m,...h}=e;return(0,l.jsx)(d,{...h,isOpen:s})}},924591:function(e,t,s){s.d(t,{Z:()=>u});var n=s(686659),a=s(667294),r=s(740097),i=s(100424),l=s(739405),o=s(893957),d=s(785893);function u({_dangerouslySetThumbnail:e,_dangerouslySetPrimaryAction:t,text:s,primaryAction:u,dismissButton:c,helperLink:p,thumbnail:_,type:m,dataTestId:h,duration:g=2e3,onHide:f,href:b,onClick:v,openNewPage:w,imageUrl:y}){let S;(0,a.useEffect)(()=>{(0,n.Z)("Toast","/app/packages/gestaltExtensions/Toast.tsx")},[]);let C=(0,l.ZP)(),[P,T]=(0,a.useState)(!1),[E,x]=(0,a.useState)(!1),k=(0,a.useRef)(void 0),A=()=>{T(!0),k.current=setTimeout(f,i.Vg)},M=()=>{k.current=setTimeout(A,g)},I=()=>{k.current&&clearTimeout(k.current)};(0,o.Z)(()=>(setTimeout(()=>x(!0),100),M(),I)),y&&(S={image:(0,d.jsx)(r.Ee,{alt:"string"==typeof s?s:`${s[0]} ${s[1]}`,fit:"cover",naturalHeight:1,naturalWidth:1,src:y})});let R=(0,d.jsx)(r.FN,{_dangerouslySetPrimaryAction:t,_dangerouslySetThumbnail:e,dismissButton:c,helperLink:p,primaryAction:u,text:s,thumbnail:S??_,type:m}),{marginTop:O,opacity:U,pointerEvents:N,position:L,transform:Z,transition:D,visibility:B}=(0,i.ZP)({deviceType:C,hiding:P,visible:E});return(0,d.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{transform:Z,transition:D,visibility:B,pointerEvents:N}},"data-test-id":h??"toast",display:"flex",marginTop:O,onMouseEnter:I,onMouseLeave:M,opacity:U,position:L,children:b?(0,d.jsx)(r.Tg,{href:b,onTap:({event:e,dangerouslyDisableOnNavigation:t})=>{b.startsWith("#")&&(e.preventDefault(),t()),v?.(e)},rounding:"pill",target:w?"blank":null,children:R}):R})}},100424:function(e,t,s){s.d(t,{Vg:()=>n,ZP:()=>a});let n=200,a=({deviceType:e,hiding:t,visible:s})=>{let n="desktop"===e,a=0,r=n?"translateY(200px)":"translateY(-200px)",i="opacity 0.1s ease-in-out",l="hidden";return s&&!t&&(a=1,r="translateY(0)",i="all 0.7s cubic-bezier(.19, 1.15, .48, 1)",l="visible"),s&&t&&(r="scale(1.1)",i="opacity transform 0.2s"),{opacity:a,pointerEvents:"auto",position:"relative",marginTop:10*!!n,transform:r,transition:i,visibility:l}}},319226:function(e,t,s){s.d(t,{u_:()=>c.ZP,FN:()=>p.Z,qE:()=>i,HE:()=>u});var n=s(740097),a=s(785893);function r({accessibilityLabel:e,color:t,name:s,outline:r,size:i,src:l,verified:o}){return(0,a.jsx)(n.qE,{accessibilityLabel:e,color:t,name:s,outline:r,size:i,src:l?.includes("images/user/default")&&s?void 0:l,verified:o})}r.displayName="Avatar";let i=r;var l=s(216975),o=s(24246);function d({accessibilityControls:e,accessibilityExpanded:t,accessibilityHaspopup:s,addCollaborators:r,collaborators:i,href:d,onClick:u,ref:c,role:p,size:_}){let m=(0,o.Z)();return(0,a.jsx)(n.HE,{ref:c,accessibilityControls:e,accessibilityExpanded:t,accessibilityHaspopup:s,accessibilityLabel:(({listOfUsers:e,i18n:t,addCollaborators:s=!1})=>{let n={first:e[0]??"",second:e[1]??"",third:e[2]??"",remaining:String(e.length-2)};if(e.length-2>=99)return s?(0,l.Wc)(t.bt("Collaborators: {{ first }}, {{ second }} and over 99 others. Add collaborators.", "Collaborators: {{ first }}, {{ second }} and over 99 others. Add collaborators.", "getTranslatedList.moreThan99PeopleAndAddCollaborators", undefined, true),n):(0,l.Wc)(t.bt("Collaborators: {{ first }}, {{ second }} and over 99 others.", "Collaborators: {{ first }}, {{ second }} and over 99 others.", "getTranslatedList.moreThan99People", undefined, true),n);if(s)switch(e.length){case 0:return"";case 1:return(0,l.Wc)(t.bt("Collaborators: {{ first }}. Add collaborators.", "Collaborators: {{ first }}. Add collaborators.", "getTranslatedList.onePersonAndAddCollaborator", undefined, true),n);case 2:return(0,l.Wc)(t.bt("Collaborators: {{ first }} and {{ second }}. Add collaborators.", "Collaborators: {{ first }} and {{ second }}. Add collaborators.", "getTranslatedList.twoPeopleAndAddCollaborator", undefined, true),n);case 3:return(0,l.Wc)(t.bt("Collaborators: {{ first }}, {{ second }} and {{ third }}. Add collaborators.", "Collaborators: {{ first }}, {{ second }} and {{ third }}. Add collaborators.", "getTranslatedList.threePeopleAndAddCollaborator", undefined, true),n);default:return(0,l.Wc)(t.bt("Collaborators: {{ first }}, {{ second }} and {{ remaining }} more. Add collaborators.", "Collaborators: {{ first }}, {{ second }} and {{ remaining }} more. Add collaborators.", "getTranslatedList.moreThan2PeopleAndAddCollaborators", undefined, true),n)}switch(e.length){case 0:return"";case 1:return(0,l.Wc)(t.bt("{{ first }}.", "{{ first }}.", "getTranslatedList.onePerson", undefined, true),n);case 2:return(0,l.Wc)(t.bt("Collaborators: {{ first }} and {{ second }}.", "Collaborators: {{ first }} and {{ second }}.", "getTranslatedList.twoPeople", undefined, true),n);case 3:return(0,l.Wc)(t.bt("Collaborators: {{ first }}, {{ second }} and {{ third }}.", "Collaborators: {{ first }}, {{ second }} and {{ third }}.", "getTranslatedList.threePeople", undefined, true),n);default:return(0,l.Wc)(t.bt("Collaborators: {{ first }}, {{ second }} and {{ remaining }} more.", "Collaborators: {{ first }}, {{ second }} and {{ remaining }} more.", "getTranslatedList.moreThan2People", undefined, true),n)}})({listOfUsers:i.map(e=>e.name),i18n:m,addCollaborators:r}),addCollaborators:r,collaborators:i.map(e=>{let t;return{...e,src:(t=e.src,t?.includes("images/user/default"))?void 0:e.src}}),href:d,onClick:u,role:p,size:_})}d.displayName="AvatarGroup";let u=d;var c=s(465784),p=s(924591)},331506:function(e,t,s){s.d(t,{bN:()=>_,BY:()=>c,fs:()=>o,EU:()=>l,kt:()=>p,Ly:()=>u,RC:()=>i,eK:()=>d});let n=/\s\s+/g;var a=s(680589);let r=Object.freeze(new Set(["sensitive_raw_pin_text","is_sensitive_rich_pin_title"])),i=({storyPinDataMetadataPinTitle:e,pinTitle:t})=>e||t,l=(e,t)=>e?e.trim().length>t?(0,a.ZP)(e.trim(),t).trim():e.trim():"",o=({pinTitle:e,gridTitle:t,richSummaryDisplayName:s,richMetadataTitle:n,storyPinDataId:a,storyPinDataMetadataPinTitle:r})=>{let i=r||e,o=l(t,200);return o||s||n||(a&&i?i:null)},d=e=>{let{richSummaryDisplayName:t}=e,s=e.pinJoinVisualAnnotation||[],r=e.pinJoinAnnotationsWithLinks||{},i=e.richMetadataDescription||"",l=e.closeupUnifiedDescription||"",o=s.map(e=>(r||{})[e]||{name:e,url:""}),d="",u=(t||"").toLocaleLowerCase().trim(),c=i.toLocaleLowerCase().trim(),p=l.toLocaleLowerCase().trim();return l&&l.length>3&&p!==u?d=l:i&&i.length>3&&c!==u&&(d=i),d&&(d=(0,a.ZP)(d,496).replace(n," ").trim()),{description:d,annotationsWithLinks:o}},u=({pinTitle:e,gridTitle:t,richSummaryDisplayName:s,richMetadataTitle:n,storyPinDataId:a,storyPinDataMetadataPinTitle:i,pinJoinVisualAnnotation:d,seoNoindexReason:u,shouldUseSimplifiedTitle:c=!1})=>r.has(u??"")?d?.[0]??" ":c?l(t,200)||d?.[0]||"":o({pinTitle:e,gridTitle:t,richSummaryDisplayName:s,richMetadataTitle:n,storyPinDataId:a,storyPinDataMetadataPinTitle:i})||d?.[0]||e,c=e=>`/pin/${e}/`,p=(e,t)=>{let s=`Pinterest video from ${t}: `.concat(e);return""===t?e:s},_=({pinId:e,seoUrl:t})=>t&&"string"==typeof t?t:c(e)},849232:function(e,t,s){s.d(t,{kf:()=>g,l5:()=>m,of:()=>p,xC:()=>h,yz:()=>_});var n=s(667294),a=s(213491),r=s(504644),i=s(893957),l=s(986523),o=s(767415),d=s(785893);let{Provider:u,getMaybe:c}=(0,a.Z)("PwaContext"),p=({children:e,initialContext:t})=>{let[s,a]=(0,n.useState)(null),l=t||{pwaType:"unknown",twaType:null},c=l.pwaType;(0,i.Z)(()=>{let e=(0,r.FB)(window)||"unknown";a(e),c!==e&&(0,o.nP)("pwa.type_mismatch",{sampleRate:1,tags:{serverPwaType:c,clientPwaType:e,conflict:"unknown"!==c&&"unknown"!==e}})});let p="unknown"===c&&s?s:c,{twaType:_}=l,m=(0,n.useMemo)(()=>({pwaType:p,twaType:_}),[p,_]);return(0,d.jsx)(u,{value:m,children:e})},_=()=>{let e=c();return e?.pwaType??"unknown"},m=()=>{let e=c();return e?.twaType??null},h=()=>"android-twa"===_(),g=()=>{let e=_(),t=(0,l.Z)();return"unknown"===e&&t?null:"windows"===e}},415316:function(e,t,s){s.d(t,{o:()=>n,u:()=>a});let{Provider:n,getMaybe:a}=(0,s(213491).Z)("inviteContext")},577356:function(e,t,s){s.d(t,{Zo:()=>n,dI:()=>a});let{Provider:n,get:a}=(0,s(213491).Z)("toastManagerContext")},787194:function(e,t,s){s.d(t,{M:()=>i,Q:()=>r});var n=s(667294);let a=(0,n.createContext)(null),r=()=>(0,n.useContext)(a),i=a},45762:function(e,t,s){s.d(t,{Z:()=>_});var n=s(4533),a=s(15881),r=s(505633),i=s(331506),l=s(34550),o=s(418282),d=s(935833);let u=new class{constructor(){this.listeners={}}on(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)}emit(e,t){this.listeners[e]&&this.listeners[e].forEach(e=>e(t))}},c=new class{constructor(){this.rules={},this.init()}init(){for(let e of[{category:"dweb_max_free_pin_modal",validate:this.validateImageView.bind(this),action:"SHOW_LOGIN_MODAL"},{category:"dweb_save",validate:this.saveRule.bind(this),action:"SHOW_SAVE_MODAL"},{category:"dweb_scroll_banner_dismiss_rule",validate:this.scrollBanerDismissRule.bind(this),action:"BOTTOM_RIGHT_BANNER_DISMISS"},{category:"dweb_scroll_banner_limit_rule",validate:this.scrollBannerLimitRule.bind(this),action:"BOTTOM_RIGHT_BANNER_LIMIT"},{category:"dweb_scroll_banner_show",validate:this.scrollBannerShowRule.bind(this),action:"BOTTOM_RIGHT_BANNER_SHOW"}])this.addRule(e)}initExperiment(e){this.experiment=e}addRule(e){this.rules[e.category]=this.rules[e.category]??[],this.rules[e.category].push(e)}evaluate(e,t){if(!this.rules[e])return null;for(let s of this.rules[e])if(s.validate(t))return s.action;return null}validateImageView(e){let{clickCount:t}=e,{hasSeenLoginModal:s}=e,{hasDismissedLoginModal:n}=e,a=this.experiment?.group==="enabled_relaxation";return a?t+1>=4&&!s&&!n:t+1>=4&&!s}saveRule(e){return"desktop"===e.deviceType}scrollBanerDismissRule(e){return e.scrollTop<64}scrollBannerLimitRule(e){return e.scrollTop<4e3}scrollBannerShowRule(e){let t=this.experiment?.group==="enabled_relaxation";return t?e.isInOpenModalExperience||e.isSafari||e?.state?.scrollSessionCount!==3&&!e.hasDismissedLoginModal:e.isInOpenModalExperience||e.isSafari||e?.state?.scrollSessionCount!==3}};var p=s(925201);let _=new class{constructor(){this.init()}init(){u.on("pinView",this.handlePinView.bind(this)),u.on("pinSave",this.handleSavePin.bind(this)),u.on("showDesktopSignupModal",this.showDesktopSignupModal.bind(this)),u.on("hideDesktopSignupModal",this.hideDesktopSignupModal.bind(this)),u.on("onScrollHybridBanner",this.onScrollHybridBanner.bind(this))}initExperiment(e){this.experiment=e("dweb_upsell_manager_mvp_2"),this.experiment&&c.initExperiment(this.experiment)}emitEvent(e,t){u.emit(e,t)}handlePinView(e){let{history:t,linkTarget:s}=e,u=(0,l.M0)().getItem(n.cu)??0;(0,l.M0)().setItem(n.cu,u+1);let _=(0,o.Nl)().getItem(a.J7);if("SHOW_LOGIN_MODAL"===c.evaluate("dweb_max_free_pin_modal",{clickCount:u,hasSeenLoginModal:_})){let{onUpsellTriggerCallback:n}=e;n(),(0,d.My)("dweb.navigational.upsell.show"),(0,o.Nl)().setItem(a.J7,"true");let l={pinId:e.pinId,seoUrl:e.seoUrl},u=(0,p.Z)((0,i.bN)(l),{mt:"login"});if("fullPageLoad"===s)(0,r.Z)(u,!1);else if("duploClientNav"===s)t.push(u);else{let e=window.open(u,"_blank");e?.focus()}}}handleSavePin(e){if("SHOW_SAVE_MODAL"===c.evaluate("dweb_save",{deviceType:e.deviceType})){let{pinId:t,attributionLabel:s,modalHeadingType:n,showSignupModal:a}=e;a({attributionLabel:"extended_save_out_of_quota"===n?"click_save_button_with_max_unauth_saves":s||"click_save_button_on_closeup",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",mobileOptions:{headingType:n},desktopOptions:{modalType:"signup",modalOptions:{source:"saveButtonExp",container:"save"}},pinId:t})}}showDesktopSignupModal(e){let{displayProps:t,viewType:s,viewParameter:n,trackInteraction:a,trackConversionUpsellForContext:r,logDesktopSignupModalEvent:i,dispatchSignupModalAction:l}=e;l({type:"show",displayProps:t});let{attributionLabel:o,signupFlow:d,reason:u}=t;a({action:"trigger",item:d.type.includes("signup")?"signup-modal":"login-modal"}),r({viewType:s,viewParameter:n,eventType:14688,element:{UPSELL_LOGIN_OR_SIGNUP:13319,ACTION_REQUIRES_LOGIN_OR_SIGNUP:13320,CLICK_LOGIN_OR_SIGNUP:13321}[u]||13322,component:"login"===d.type?14212:14214,upsellReason:o}),i("dispatch_show",{attributionLabel:o,modalType:d.type,reason:u})}hideDesktopSignupModal(e){let{shouldDoSideEffects:t,loginForMore:s,dispatchSignupModalAction:n,logDesktopSignupModalEvent:a}=e,r=e.isEligibilityLoginForMore;t&&s&&r&&s.setVisible(!1),n({type:"dismiss"}),a("dispatch_dismiss",{shouldDoSideEffects:t})}onScrollHybridBanner(e){let{evt:t,isSafari:s,trackConversionUpsell:n,UnauthHybridBannerClassComponent:r,isInOpenModalExperience:i}=e,l=0,d=t&&t.target instanceof Document?t.target:null;if(d&&d.documentElement&&d.documentElement.scrollTop>0?l=d.documentElement.scrollTop:d&&d.body&&d.body.scrollTop>0&&(l=d.body.scrollTop),"BOTTOM_RIGHT_BANNER_DISMISS"===c.evaluate("dweb_scroll_banner_dismiss_rule",{scrollTop:l}))r.state.shouldShowBanner&&!r.state.bannerDismissed&&(n({element:13893,eventType:10243}),r.state.bannerDismissed=!0),r.setShouldShowBanner(!1);else if("BOTTOM_RIGHT_BANNER_LIMIT"===c.evaluate("dweb_scroll_banner_limit_rule",{scrollTop:l})){let e=r.state.shouldShowBanner;r.setState(e=>({shouldShowBanner:"BOTTOM_RIGHT_BANNER_SHOW"===c.evaluate("dweb_scroll_banner_show",{isInOpenModalExperience:i,isSafari:s,state:e}),scrollSessionCount:Math.ceil(l/800)}),()=>{e||!r.state.shouldShowBanner||r.state.bannerViewed||(n({eventType:14688,element:13319,component:14479,upsellReason:"scroll_down"}),r.state.bannerViewed=!0)})}else!(0,o.Nl)().getItem(a.J7)&&!i&&s&&t&&t.preventDefault()}}},609170:function(e,t,s){s.d(t,{C:()=>a});var n=s(501010);function a(){let{checkExperiment:e}=(0,n.Z)();switch(e("entrypoints_collage_wasm").group){case"prefetch_all":default:return{preloadExtent:"Both"};case"prefetch_only_js":return{preloadExtent:"OnlyJS"};case"control":return{preloadExtent:"None"}}}},746319:function(e,t,s){s.d(t,{Z:()=>r});var n=s(935059),a=s(501010);let r=()=>{let{checkExperiment:e}=(0,a.Z)(),t=(0,n.Z)(),s=t.isAuth&&!t.isPartner;return (t=!1)=>{if(!s)return{anyEnabled:!1,followupFeatureEnabled:!1};let n=e("web_collage_creation",{dangerouslySkipActivation:t}),{anyEnabled:a}=n;return{anyEnabled:a,followupFeatureEnabled:n.group.startsWith("employee")||"enabled_followup_feature"===n.group}}}},872003:function(e,t,s){s.d(t,{G:()=>p,Kl:()=>_,vo:()=>c});var n=s(667294),a=s(213491),r=s(57887),i=s(17658),l=s(785893);let o=()=>s.e("65333").then(s.bind(s,557189)),{Provider:d,get:u}=(0,a.Z)("NativeEngagements");function c({children:e}){let[t,s]=(0,i.Z)(o,[]);(0,r.Z8)("NativeInteractionsResource",e=>{s({type:"FETCH_COMPLETE",payload:e})}),(0,r.my)("NativeInteractionsResource",e=>{s({type:"FETCH_MORE_COMPLETE",payload:e})});let a=(0,n.useMemo)(()=>({dispatch:s,nativeEngagements:t}),[s,t]);return(0,l.jsx)(d,{value:a,children:e})}function p(){let{dispatch:e}=u();return(0,n.useMemo)(()=>({nativeEngagementsHiddenForUser:t=>{e({type:"NATIVE_ENGAGEMENT_HIDDEN_FOR_USER",payload:{userId:t}})}}),[e])}function _(){let{nativeEngagements:e}=u();return e}},411657:function(e,t,s){s.d(t,{D:()=>n,u:()=>a});let{Provider:n,getMaybe:a}=(0,s(213491).Z)("unauthPageWrapperContext")},167021:function(e,t,s){s.d(t,{K:()=>i,T:()=>l});var n=s(667294),a=s(785893);let r=(0,n.createContext)({getPinFeedbackStatus:()=>void 0,setPinFeedbackStatus:()=>{}}),i=()=>(0,n.useContext)(r);function l({children:e}){let[t,s]=(0,n.useState)(Object.freeze({})),i=(0,n.useMemo)(()=>({getPinFeedbackStatus:({pinId:e})=>t[e],setPinFeedbackStatus:({pinId:e,pinFeedbackStatus:n})=>s({...t,[e]:n})}),[t]);return(0,a.jsx)(r,{value:i,children:e})}},874288:function(e,t,s){s.d(t,{Z:()=>a});var n=s(581722);let a=()=>(0,n.v9)(({session:{canUseNativeApp:e}})=>e)},307618:function(e,t,s){s.d(t,{$:()=>l,w:()=>o});var n=s(667294),a=s(213491),r=s(785893);let{Provider:i,getMaybe:l}=(0,a.Z)("CloseupPreviewContext");function o({children:e}){let[t,s]=(0,n.useState)(Object.freeze({})),a=(0,n.useMemo)(()=>({setData:(e,t)=>s(s=>({...s,[e]:t})),getData:e=>t[e]}),[t]);return(0,r.jsx)(i,{value:a,children:e})}},40763:function(e,t,s){s.d(t,{Z:()=>i});var n=s(501010),a=s(774838),r=s(739405);let i=({skipExpActivation:e=!1})=>{let{checkExperiment:t}=(0,n.Z)(),s=(0,r.HG)(),{isBot:i,isAuthenticated:l}=(0,a.B)();return!l&&!!s&&s&&!i&&t("unauth_dweb_closeup_redesign",{dangerouslySkipActivation:e}).anyEnabled}},301527:function(e,t,s){s.d(t,{o:()=>l,p:()=>o});var n=s(667294),a=s(213491),r=s(785893);let{Provider:i,get:l}=(0,a.Z)("Session");function o({children:e}){let[t,s]=(0,n.useState)(void 0),a=(0,n.useCallback)(()=>s(void 0),[]),l=(0,n.useMemo)(()=>({unauthCommentPinId:t,setUnauthCommentPinId:s,removeUnauthCommentPinId:a}),[t,a]);return(0,r.jsx)(i,{value:l,children:e})}},201198:function(e,t,s){s.d(t,{Z:()=>d});var n=s(686659),a=s(667294),r=s(740097),i=s(785893);let l={__style:{margin:"0 10px",borderRight:"3px solid transparent",borderTop:"3px solid #fff",animation:"spin .8s linear infinite"}};function o(){return(0,i.jsx)(r.xu,{alignItems:"center",color:"primary",display:"flex",height:"100%",justifyContent:"center",position:"absolute",rounding:8,width:"100%",children:(0,i.jsx)(r.xu,{dangerouslySetInlineStyle:l,"data-test-id":"submit-button-spinner",display:"inlineBlock",height:18,position:"relative",rounding:"circle",width:18})})}function d({disabled:e,form:t,fullWidth:s,name:l,onClick:d,size:u,submitting:c,text:p}){return(0,a.useEffect)(()=>{(0,n.Z)("SubmitButton","/app/www/common/SubmitButton/SubmitButton.tsx")},[]),(0,i.jsxs)(r.xu,{"data-test-id":"submit-button",display:"flex",position:"relative",children:[c&&(0,i.jsx)(o,{}),(0,i.jsx)(r.zx,{color:"red",disabled:e||c,form:t,fullWidth:s,name:l,onClick:d,size:u,text:p,type:"submit"})]})}},248481:function(e,t,s){s.d(t,{G3:()=>c,Rp:()=>u,kp:()=>d});var n=s(4533),a=s(15881),r=s(375181),i=s(34550),l=s(418282);let o=14*r.F4,d=(e,t)=>{let s=function(){let e=Date.now(),t=(0,i.M0)(),s=Number(t.getItem(n.Li)??null);return{currentTime:e,firstUpsellTime:Number(t.getItem(n.O7)??null),lastUpsellTime:s,showedAppUpsellCurrentSession:!!(0,l.Nl)().getItem(a.JO)}}();return e?function(e,t,s){let{currentTime:a,firstUpsellTime:r,lastUpsellTime:l,showedAppUpsellCurrentSession:d}=e;return(s=s||o,!r||a<r+t)?!d:a-l>s&&((0,i.M0)().removeItem(n.O7),!0)}(s,r.F4):function(e,t){let{currentTime:s,lastUpsellTime:n}=e;return t=t||o,!n||s-n>t}(s,t)},u=({isBot:e,platform:t,userAgent:s})=>{try{return!e&&"android"===t&&7>parseFloat((e=>{let t=(e=e.toLowerCase()).match(/android\s([0-9\.]*)/i);return t?t[1]:void 0})(s))}catch(e){return!1}},c=e=>(e.startsWith("zh")||e.startsWith("ar")?e:e.slice(0,2)).toUpperCase()},966039:function(e,t,s){s.d(t,{Es:()=>d,HW:()=>o,er:()=>c,rQ:()=>u});var n=s(4533),a=s(34550),r=s(767415);let i=e=>e>=Date.now()-72e5,l=(e,t)=>{let s=[];if(e)for(let n of e)(!t||n.is_shared)&&i(n.ts)&&s.push(n);return s},o=()=>{let e=(0,a.M0)().getItem(n.uc)??[],t=l(e,!1),s=l(e,!0),r=t.map(e=>e.first_pin_image_signature),o=s.map(e=>e.first_pin_image_signature),d=(e=>{let t={};if(e)for(let s of e)s.is_shared&&i(s.ts)&&s.pin_id&&(t[s.pin_id]={inviteCode:s.pin_invite_code});return t})(e);return{extraPlpImages:r,plpImageRenderData:t,extraBlpImages:l((0,a.M0)().getItem(n.hI)??[],!0).map(e=>e.first_pin_image_signature),extraSharedImages:o,sharedPinData:d}},d=(e,t)=>{if(e.length!==t.length)return!1;for(let s=0;s<e.length;s+=1)if(e[s].id!==t[s].id)return!1;return!0},u=(e,t)=>e.map(e=>({1:e,2:(t[e]||[]).map(e=>({1:e,2:"pin"}))})),c=(e,t,s,n)=>{let a={};return e.forEach(e=>{let i=e.id,l=e.pins.length??0;a[i]=l,(0,r.QX)("webapp.log.nux.pin.picker.step.pin.number.of.pins",l,{sampleRate:1,addHostname:!0,tags:{appType:t,useCaseId:i,gender:s,age:n,use_case_display_name:e.display_name}}),(0,r.S0)("gauge.webapp.log.nux.pin.picker.step.pin.number.of.pins",l,{sampleRate:1,addHostname:!0,tags:{appType:t,useCaseId:i,gender:s,age:n,use_case_display_name:e.display_name}})}),a}},818906:function(e,t,s){s.d(t,{$:()=>c,Z:()=>_});var n=s(667294),a=s(581722),r=s(4533),i=s(15881),l=s(127078),o=s(784548),d=s(34550),u=s(418282);let c=2,p=e=>e.length?{pins:e}:null,_=()=>{let e,t=(0,d.M0)(),s=(0,a.I0)(),_=(0,l.hO)(),m=Array.isArray(_)&&_.length>0?_.map(e=>({id:e.id,imageUrl:e.imageUrl,nodeId:null})):(e=u.ZP.getItem(i.w3),e?.pins??[]),h=m.map(e=>e.id).join(","),g=(0,n.useMemo)(()=>m,[h]),f=e=>{t.accessAllowed?t.setItem(r.s1,p(e)):u.ZP.setItem(i.w3,p(e)),s((0,o.pv)(e.map(e=>({id:e.id,imageUrl:e.imageUrl,ts:Date.now()}))))},b=()=>g.length<c;return{pins:g,save:e=>{b()&&f(g.filter(({id:t})=>t!==e.id).concat([e]))},unsave:e=>{f(g.filter(({id:t})=>t!==e))},isSaved:e=>g.some(({id:t})=>t===e),clear:()=>{f([])},canSaveMore:b}}},39722:function(e,t,s){s.d(t,{B:()=>d,m:()=>o});var n=s(667294),a=s(312048),r=s(213491),i=s(785893);let{Provider:l,getMaybe:o}=(0,r.Z)("NotifDetailRepinContext");function d({children:e}){let[t,s]=(0,n.useState)(Object.freeze({})),[r,o]=(0,n.useState)(!1),[d,u]=(0,n.useState)(!1),c=(0,a.TH)(),p=(0,n.useMemo)(()=>{let e=/^\/pin\/\d+\/repin\/?$/,n=/^\/news_hub\/\d+\/?$/;return{isSaved:e=>!!t[e],save:e=>{d&&s(t=>({...t,[e]:!0}))},reset:()=>{let t=window?.location.pathname||"";n.test(t)||e.test(t)||(s(Object.freeze({})),o(!1),u(!1))},isInNewsHubQuickSaveExpAndNewsHubPage:()=>{let e=c.pathname||"";return n.test(e)&&r},inNewsHubQuickSaveExp:r,setInNotifDetailPage:u,setInNewsHubQuickSaveExp:o}},[t,r,d,c]);return(0,i.jsx)(l,{value:p,children:e})}},38359:function(e,t,s){s.d(t,{BT:()=>U,Du:()=>L,Fh:()=>M,HY:()=>N,HZ:()=>R,Jw:()=>b,Kp:()=>z,L7:()=>n,LT:()=>c,Lj:()=>B,Nw:()=>T,Q_:()=>P,Qc:()=>a,R5:()=>x,RA:()=>E,Tt:()=>A,UF:()=>d,UV:()=>i,VB:()=>w,W1:()=>r,Ws:()=>p,X5:()=>k,Yt:()=>O,ZW:()=>o,cK:()=>y,cy:()=>f,fA:()=>D,gm:()=>v,h7:()=>C,k:()=>h,mE:()=>H,o4:()=>m,oL:()=>Z,qf:()=>_,tr:()=>u,uD:()=>S,uO:()=>g,vF:()=>l,wJ:()=>I});let n=1,a=2,r="female",i="male",l="unspecified",o="en-US",d="US",u=3,c="Welcome",p="Gender",_="CountryLocale",m="InterestPicker",h="UseCase",g="PinPicker",f="LoadingStep",b="AppInstall",v="NUX_PIN_PICKER_STEP_STATUS",w="NUX_USE_CASE_STEP_STATUS",y={NUX_GENDER_STEP_NAME:p,NUX_COUNTRY_LOCALE_STEP_NAME:_,NUX_INTEREST_PICKER_STEP_NAME:m,NUX_USE_CASE_STEP_NAME:h,NUX_PIN_PICKER_STEP_NAME:g,NUX_LOADING_STEP_NAME:f,NUX_APP_INSTALL_STEP_NAME:b},S=2,C=3,P=6,T=112,E=160,x=60,k=1e3,A=2500,M=1900,I=2e3,R=3,O=1,U=3,N=3,L=5e3,Z=250,D=1e10,B=507641,H=300,z=200},179664:function(e,t,s){s.d(t,{W:()=>c,u:()=>u});var n=s(667294),a=s(213491),r=s(501010),i=s(38359);let l=(e,t)=>{let s=((e,t)=>{switch(t.type){case"SELECT_PIN":{let{pinData:s,pinId:n,useCaseId:a}=t.payload;return function({pinData:e,pinId:t,state:s,useCaseId:n}){let a=new Map(s.selectedUseCases),r=a.get(n)||{selectedPins:[],heroPin:null,backfillPins:[]},i={...e,pinId:t,selectedAt:Date.now()};return a.set(n,{...r,selectedPins:[...r.selectedPins,i]}),{...s,selectedUseCases:a}}({pinData:s,pinId:n,state:e,useCaseId:a})}case"DESELECT_PIN":{let{pinId:s,useCaseId:n}=t.payload;return function({pinId:e,state:t,useCaseId:s}){let n=new Map(t.selectedUseCases),a=n.get(s);return a&&n.set(s,{...a,selectedPins:a.selectedPins.filter(t=>t.pinId!==e)}),{...t,selectedUseCases:n}}({pinId:s,state:e,useCaseId:n})}case"SELECT_USE_CASE":{let{heroPin:s,useCaseId:n}=t.payload;return function({heroPin:e,state:t,useCaseId:s}){let n=new Map(t.selectedUseCases);return n.set(s,{selectedPins:[],heroPin:e,backfillPins:[]}),{...t,selectedUseCases:n}}({heroPin:s,state:e,useCaseId:n})}case"DESELECT_USE_CASE":{let{useCaseId:s}=t.payload;return function({state:e,useCaseId:t}){let s=new Map(e.selectedUseCases);return s.delete(t),{...e,selectedUseCases:s}}({state:e,useCaseId:s})}case"ADD_BACKFILL_PINS":{let{backfillPins:s,useCaseId:n}=t.payload;return function({backfillPins:e,state:t,useCaseId:s}){let n=new Map(t.selectedUseCases),a=n.get(s);return a&&n.set(s,{...a,backfillPins:[...e]}),{...t,selectedUseCases:n}}({backfillPins:s,state:e,useCaseId:n})}default:return e}})(e,t);return{...s,history:[...s.history||[],t]}};var o=s(785893);let{Provider:d,get:u}=(0,a.Z)("Nux");function c({children:e}){let[t,s]=(0,n.useState)([]),[a,u]=(0,n.useState)({}),[c,p]=(0,n.useState)(!1),{checkExperiment:_}=(0,r.Z)(),m=_("ap_dweb_nux_revamp_auto_pin_select",{dangerouslySkipActivation:!0}).anyEnabled,h={selectedUseCases:new Map,history:[]},[g,f]=(0,n.useReducer)(l,h),b=(0,n.useCallback)(()=>Array.from(g.selectedUseCases.values()).reduce((e,t)=>e+t.selectedPins.length,0),[g.selectedUseCases]),v=(0,n.useCallback)(e=>Array.from(g.selectedUseCases.entries()).reduce((t,[s,n])=>e&&s===e?t:t.concat(n.selectedPins),[]),[g.selectedUseCases]),w=(0,n.useCallback)(e=>v(e).map(e=>({url:e.imageMediumUrl,height:e.height,width:e.width})),[v]),y=(0,n.useCallback)(()=>{let e=[];for(let[t,s]of g.selectedUseCases){let n=s.selectedPins.map(e=>({1:e.pinId,2:"pin"}));e.push({1:t,2:n})}return e},[g.selectedUseCases]),S=(0,n.useCallback)(()=>g.selectedUseCases&&b()>=i.HZ,[b,g.selectedUseCases]),C=(0,n.useCallback)(()=>m?g.selectedUseCases.size>=i.BT:g.selectedUseCases.size>=i.Yt,[g.selectedUseCases,m]),P=(0,n.useMemo)(()=>({checkHasMetMinimumPinSelectionRequirement:S,checkHasMetMinimumUseCaseSelectionRequirement:C,getNuxSignals:y,getNumSelectedPins:b,getSelectedPinImageData:w,nuxSelectionsDispatch:f,nuxSelectionsState:g,selectedPins:a,selectedUseCases:t,setSelectedPins:u,setSelectedUseCases:s,setShouldUseNewReducerState:p,shouldUseNewReducerState:c}),[S,C,y,b,w,f,g,a,t,u,s,p,c]);return(0,o.jsx)(d,{value:P,children:e})}},513504:function(e,t,s){s.d(t,{H5:()=>o,Nq:()=>l,Q_:()=>d,bJ:()=>u});var n=s(27399),a=s(236269),r=s(554092),i=s(38359);function l(e){let{updateUserData:t}=e,s={},l=null;if(t.gender&&[i.W1,i.UV].includes(t.gender)?s.gender=t.gender:t.custom_gender&&(s.custom_gender=t.custom_gender,s.customGender=t.custom_gender,s.gender=i.vF),t.age?s.age=t.age:t.birthdate&&(s.birthdate=t.birthdate),t.locale&&(s.locale=t.locale),t.country&&(s.country=t.country),t.business_vertical&&(s.businessVertical=t.business_vertical),t.business_vertical_other&&(s.businessVerticalOther=t.business_vertical_other),t.number_employees&&(s.numberEmployees=t.number_employees),t.first_name&&(s.firstName=t.first_name),t.last_name&&(s.lastName=t.last_name),t.full_name&&(s.fullName=t.full_name),t.parent_email&&(s.parentEmail=t.parent_email),t.website_url&&(s.websiteUrl=t.website_url),t.listed_website_url&&(s.listedWebsiteUrl=t.listed_website_url),void 0!==t.allow_analytic_cookies&&(s.allow_analytic_cookies=t.allow_analytic_cookies),void 0!==t.allow_analytic_cookies&&(s.allow_marketing_cookies=t.allow_marketing_cookies),void 0!==t.allow_analytic_cookies&&(s.allow_personalization_cookies=t.allow_personalization_cookies),t.advertising_intent||t.business_name||t.account_type||t.business_goals||t.selected_ecommerce_platforms||t.enable_profile_message||t.enable_profile_address){let{account_type:e,advertising_intent:s,business_name:n,business_goals:a,enable_profile_message:r,enable_profile_address:i,selected_ecommerce_platforms:o}=t;l={...s?{advertising_intent:s}:{},...e?{account_type:e}:{},...n?{business_name:n}:{},...a?{business_goals:a}:{},...r?{enable_profile_message:r}:{},...i?{enable_profile_address:i}:{},...o?{selected_ecommerce_platforms:o}:{}}}l&&(s.partner=l,l.business_name&&(s.firstName=l.business_name));let o=n.Z.create("UserSettingsResource",{...t,surface_tag:r.i.NUX}).callUpdate();return async function(e){try{let t=await o;return e({type:"UPDATE_USER_SET",payload:s}),t}catch(e){return Promise.reject(Error((0,a.Z)(e,"message")))}}}function o(e){return{type:"UPDATE_USER_FIRST_HOME_FEED_REQUEST_AFTER_NUX",payload:e}}function d(e,t){return()=>{n.Z.create("UserStateResource",{state:e,value:t}).callCreate()}}function u(e,t=""){return()=>n.Z.create("UpdateFollowedInterestsResource",{referrer:t,updated_interest_follows:e}).callUpdate()}},500912:function(e,t,s){s.d(t,{Q:()=>o,n:()=>l});var n=s(667294),a=s(213491),r=s(785893);let{Provider:i,getMaybe:l}=(0,a.Z)("RepinContext");function o({children:e}){let[t,s]=(0,n.useState)(Object.freeze({})),a=(0,n.useMemo)(()=>({getSavedPinId:e=>t[e],isSaved:e=>!!t[e],save:(e,t)=>s(s=>({...s,[e]:t})),unsave:e=>s(t=>({...t,[e]:null}))}),[t]);return(0,r.jsx)(i,{value:a,children:e})}},636953:function(e,t,s){s.d(t,{Z:()=>r});var n=s(667294),a=s(767415);function r(e){let t=(0,n.useRef)({kind:"NotOver"}),s=(0,n.useCallback)(()=>{"NotOver"===t.current.kind&&(t.current={kind:"OverButNotClicked",mousedOverAt:Date.now()})},[]),r=(0,n.useCallback)(()=>{"OverButNotClicked"===t.current.kind&&((0,a.LY)("entrypointRouter.timeOnLinkUntilMouseOut",Date.now()-t.current.mousedOverAt,{sampleRate:.1,tags:{key:e}}),(0,a.nP)("entrypointRouter.mouseOverResult",{sampleRate:.1,tags:{key:e,outcome:"MouseOut"}})),t.current={kind:"NotOver"}},[e]);return{onClick:(0,n.useCallback)(()=>{"OverButNotClicked"===t.current.kind&&((0,a.LY)("entrypointRouter.timeOnLinkUntilClick",Date.now()-t.current.mousedOverAt,{sampleRate:.1,tags:{key:e}}),(0,a.nP)("entrypointRouter.mouseOverResult",{sampleRate:.1,tags:{key:e,outcome:"Click"}}),t.current={kind:"OverAndHasClicked"})},[e]),onMouseEnter:s,onMouseLeave:r}}},721750:function(e,t,s){(0,s(701943).kr)()},758594:function(e,t,s){function n({children:e,metricName:t}){let s=void 0;return s&&s.serverRenderTimings&&!s.serverRenderTimings[t]&&(s.serverRenderTimings[t]=Date.now()),e}s.d(t,{Z:()=>n}),s(701943),s(721750)}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/23256.en_GB-74e505dd178c537a.mjs.map