(self.modernJsonp=self.modernJsonp||[]).push([["44540"],{578382:function(e,t,i){i.d(t,{hw:()=>r,r9:()=>o,sh:()=>l});var s=i(447511),a=i(236269);let o=(e,t)=>t?"100%":e?s.Qi:s.$A,l=e=>e?"100%":"95%",r=e=>({message:(0,a.Z)(e,"message"),api_error_code:(0,a.Z)(e,"api_error_code"),error_code:(0,a.Z)(e,"error_code"),code:(0,a.Z)(e,"code"),httpStatus:(0,a.Z)(e,"httpStatus")})},447511:function(e,t,i){i.d(t,{$A:()=>l,J7:()=>s,MB:()=>_,NJ:()=>p,PF:()=>f,Qi:()=>r,_f:()=>o,a2:()=>m,aN:()=>a,aS:()=>b,br:()=>P,f$:()=>y,jI:()=>c,n7:()=>n,qm:()=>h,rd:()=>g,ts:()=>d,vB:()=>A,vF:()=>x,x1:()=>u,yg:()=>v});let s="#f0f0eb",a="#c957bd",o="100",l="469px",r="900px",n=600,c={__style:{backgroundColor:"#E9E4FF"}},_="520px",d="180px",u=2,h="@",p=2,b=e=>({"Thinking about the question":e.bt("Thinking about the question", "Thinking about the question", "concierge.components.chat.thinking.steps.text", undefined, true),Finish:e.bt("Finish", "Finish", "concierge.components.chat.finish.steps.text", undefined, true),"Generating the response":e.bt("Generating the response", "Generating the response", "concierge.components.chat.generating.steps.text", undefined, true),"Classifying the question":e.bt("Classifying the question", "Classifying the question", "concierge.components.chat.classifying.steps.text", undefined, true),"Fetching the data tables":e.bt("Fetching the data tables", "Fetching the data tables", "concierge.components.chat.fetching.steps.text", undefined, true),"Generating the query":e.bt("Generating the query", "Generating the query", "concierge.components.chat.query.steps.text", undefined, true),"Picking up the best query":e.bt("Picking up the best query", "Picking up the best query", "concierge.components.chat.best.query.steps.text", undefined, true),"Validating the query":e.bt("Validating the query", "Validating the query", "concierge.components.chat.validating.steps.text", undefined, true),"Correcting the query":e.bt("Correcting the query", "Correcting the query", "concierge.components.chat.correcting.steps.text", undefined, true),"Using SQL":e.bt("Using SQL", "Using SQL", "concierge.components.chat.sql.steps.text", undefined, true),"Executing the query":e.bt("Executing the query", "Executing the query", "concierge.components.chat.executing.steps.text", undefined, true),"The query execution is finished":e.bt("The query execution is finished", "The query execution is finished", "concierge.components.chat.query.finished.steps.text", undefined, true),Error:e.bt("Error", "Error", "concierge.components.chat.error.steps.text", undefined, true)}),g=["helix-users","helix-dev"],m="#pinnacle-feedback",f="https://pinterest.enterprise.slack.com/archives/C08K7TVLWJC",A="https://i.pinimg.com/originals/32/78/fb/3278fb42c068009b300151775abf22cd.png",v="https://i.pinimg.com/originals/0e/73/84/0e738478d913ac3c7d699e74918e3d9a.png",P="https://i.pinimg.com/originals/56/36/d3/5636d36bfe20b378b6a946ffc2b8dcee.png",y="https://i.pinimg.com/originals/7a/c0/dd/7ac0ddee9dcf249927b5e6a9d9363418.png",x={CUSTOMIZED_COMPONENT_BASE64_IMAGE:"customized_component_base64_image"}},663952:function(e,t,i){i.d(t,{D:()=>c,q:()=>_});var s=i(686659),a=i(667294),o=i(312048),l=i(575820),r=i(785893);let n=(0,a.createContext)(!1);function c({children:e}){(0,a.useEffect)(()=>{(0,s.Z)("InAppFactoryOAuthContext","/app/packages/InAppFactoryOAuthContext.tsx")},[]);let t=(()=>{let e=(0,o.TH)();return e.state?.isAppFactoryOAuth||((0,l.mB)(e.search).next??"").startsWith("/app-factory-oauth/")})(),[i,c]=(0,a.useState)(t);return(0,a.useEffect)(()=>{t&&c(!0)},[t]),(0,r.jsx)(n,{value:i,children:e})}function _(){return(0,a.useContext)(n)}},368550:function(e,t,i){i.d(t,{Z:()=>ew});var s=i(686659),a=i(667294),o=i(581722),l=i(230201),r=i(27399),n=i(249459),c=i(465739),_=i(209750),d=i(71133),u=i(609252),h=i(936367),p=i(209045),b=i(767415);function g(e,t,i){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:s+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let m=null;class f{constructor(e){var t;let i;g(this,"_logTimeoutLong",void 0),g(this,"_logTimeoutShort",void 0),g(this,"_clickthroughStartEvent",null),g(this,"_utcDate",new Date),g(this,"_collectionClickthroughEndEvent",null),this._webFastFlushEventsEnabled=e.webFastFlushEventsEnabled,this._contextLogger=(0,_.ZP)(e.webFastFlushEventsEnabled,e.webAuxDataErrorClassEnabled);let s=()=>{let{activeElement:e}=document;if(e&&e.id===n.Z.VIDEO_IFRAME_ID&&e)return void setTimeout(()=>e.blur(),0);u.Z.pause(h.LU),this.flushEvents()},a=(t=()=>s(),i=!1,(...e)=>{i||(i=!0,t(...e))}),o=()=>{u.Z.resume(h.LU)};{this._contextLogger&&this._contextLogger.initiateIndexDBCache&&this._contextLogger.initiateIndexDBCache(),window.addEventListener("beforeunload",a),window.addEventListener("pagehide",a),window.addEventListener("focus",o),window.addEventListener("blur",()=>s());let{hidden:e,visibilityChange:t}=(0,d.sR)(),i=()=>{document[e]?s():(this.flushEvents(),o())};t&&window.addEventListener(t,i,!1)}}setTimeoutToFlushEvents(e){!this._logTimeoutShort&&(!this._webFastFlushEventsEnabled&&e.view_type&&c.I3.includes(e.view_type)&&13===e.event_type||this._webFastFlushEventsEnabled&&(0,d.Q9)(e))?this._logTimeoutShort=setTimeout(this.flushEvents.bind(this,!1,!0),c.aD):this._logTimeoutLong||(this._logTimeoutLong=setTimeout(this.flushEvents.bind(this),c.YX))}addEvent(e,t){let i=e.event_type;if(null==i||!(0,_.cA)(e))return;this.setTimeoutToFlushEvents(e);let s=(0,_.li)(e,t);s.appState=document&&document.hasFocus()?0:void 0;let a=_.Ch[i];if(a&&1){if(a.startsWith("storyImpression")){s.event_data?.storyImpressions&&(s.event_data.storyImpression=s.event_data.storyImpressions,delete s.event_data.storyImpressions),this._contextLogger.logImpression((0,_.a)(s,"storyImpression"));return}(0,_.nc)(s,a).forEach(this._contextLogger.logImpression);return}if((0,b.nP)("webapp.contextLogger.impressionType",{sampleRate:.01,tags:{event_type:i}}),this._contextLogger.logContextEvent(s),12===i&&(this._contextLogger.logContextEvent({...s,event_type:7946}),this._clickthroughStartEvent={...s,time:1e6*Date.now()},m?.storeClickthroughProperties({view_type:s.view_type,view_parameter:s.view_parameter,component:s.component,element:s.element,object_id_str:s.object_id_str,view_data:s.view_data,aux_data:s.aux_data,clientTrackingParams:s.clientTrackingParams})),7761===i||7762===i){let e=7761===i?7777:7843;this._collectionClickthroughEndEvent={...s,event_type:e}}if(4100===i&&this._collectionClickthroughEndEvent){let e=this._collectionClickthroughEndEvent;this._collectionClickthroughEndEvent=null;let t={...e,object_id_str:s.object_id_str,duration_ns:s.duration_ns};this._contextLogger.logContextEvent(t)}}flushEvents(){let e=this._contextLogger.getContextEvents?.();e&&e.length&&this._contextLogger.flushContextEvents(),this._reset()}_reset(){this._resetShortTimerEvents(),this._resetLongTimerEvents()}_resetShortTimerEvents(){this._contextLogger.resetEventsBuffer?.(),clearTimeout(this._logTimeoutShort),this._logTimeoutShort=void 0}_resetLongTimerEvents(){this._contextLogger.resetEventsBuffer?.(),clearTimeout(this._logTimeoutLong),this._logTimeoutLong=void 0}}var A=i(753806),v=i(581909),P=i(935059),y=i(312048),x=i(433069),w=i(651263),E=i(785893);function z({children:e}){(0,a.useEffect)(()=>{(0,s.Z)("NotificationContext","/app/packages/notifications/NotificationContext.tsx")},[]);let t=(0,y.TH)(),i=(0,x.b)(),o=(0,a.useMemo)(()=>{if(i){let e=new URLSearchParams(t.search);if(!e.get("url")){let t=e.get("tracking_id")||e.get("e_t"),i=e.get("utm_campaign"),s=e.get("utm_source");if(t&&i&&s)return JSON.stringify({message_type:i,tracking_id:t,utm_source:s})}}},[i,t.search]),l=(0,a.useMemo)(()=>({landingContext:o}),[o]);return(0,E.jsx)(w.T,{value:l,children:e})}var L=i(501010),T=i(774838),k=i(647908),I=i(660322),C=i(761051),S=i(487038),D=i(49932),R=i(893957);function B({children:e}){(0,a.useEffect)(()=>{(0,s.Z)("TimeSpentManagerContext","/app/packages/time-spent/TimeSpentManagerContext.tsx")},[]);let t=(0,l.u)(),i=(0,p.w)({contextLogger:t});return(0,R.Z)(()=>{document.hasFocus()&&i.registerApp(),i.addEventListeners()}),(0,E.jsx)(D.$,{value:i,children:e})}var N=i(801983),Z=i(680405),j=i(746868),F=i(825541),O=i(740097),M=i(351736),G=i(739405);function U({children:e}){(0,a.useEffect)(()=>{(0,s.Z)("GestaltDesignTokensProvider","/app/packages/gestaltExtensions/GestaltDesignTokensProvider.tsx")},[]);let t=(0,M.vs)(),i=(0,G.HG)(),{locale:o}=(0,T.B)();return(0,E.jsx)(O.Ag,{colorScheme:t&&!i?"dark":"light",children:(0,E.jsx)(O.Ho,{languageMode:{"ar-SA":"tall","bn-IN":"tall","hi-IN":"tall","te-IN":"tall","ko-KR":"ck","zh-CN":"ck","zh-TW":"ck",ja:"ja","th-TH":"th","vi-VN":"vi"}[o]??"default",children:e})})}function H({children:e}){(0,a.useEffect)(()=>{(0,s.Z)("GestaltDeviceTypeProvider","/app/packages/gestaltExtensions/GestaltDeviceTypeProvider.tsx")},[]);let t=(0,G.ml)();return(0,E.jsx)(O.Q_,{deviceType:t?"mobile":"desktop",children:e})}let W=[];function V({children:e}){(0,a.useEffect)(()=>{(0,s.Z)("GestaltExperimentProvider","/app/packages/gestaltExtensions/GestaltExperimentProvider.tsx")},[]);let t=(0,T.B)();(0,a.useMemo)(()=>({web_gestalt_calico:{anyEnabled:!0,group:"enabled"}}),[]);let i=W.reduce((e,i)=>({...e,[i]:t.experimentsClient.checkExperiment(i)}),{});return(0,E.jsx)(O.II,{value:i,children:e})}var q=i(680391),J=i(74972);function Y({children:e}){(0,a.useEffect)(()=>{(0,s.Z)("GestaltGlobalEventsHandlerProvider","/app/packages/gestaltExtensions/GestaltGlobalEventsHandlerProvider.tsx")},[]);let{sheetMobileHandlers:t,linkHandlers:i}=function(){let{setAppFocusState:e}=(0,J.G)(),t=(0,a.useCallback)(()=>{u.Z.pause(),e(!1)},[e]),i=(0,a.useCallback)(()=>{u.Z.resume(),e(!0)},[e]),s=(0,a.useMemo)(()=>({onOpen:t,onClose:i}),[t,i]);return{linkHandlers:(0,a.useMemo)(()=>({onNavigation:({href:e,target:t})=>(0,q.Z)({href:e,target:t})}),[]),sheetMobileHandlers:s}}();return(0,E.jsx)(O.uu,{linkHandlers:i,sheetMobileHandlers:t,children:e})}var Q=i(400962),$=i(94082),K=i(663952),X=i(173202),ee=i(705460),et=i(953833),ei=i(169166),es=i(506807),ea=i(381571),eo=i(648447),el=i(591048),er=i(520803);let en=e=>["/advertiser/"].reduce((t,i)=>e.includes(i)||t,!1);function ec({children:e,immutableLocation:t,routerHistoryAction:i,staticContext:o}){(0,a.useEffect)(()=>{(0,s.Z)("PwtContext","/app/packages/pwt-logger/PwtContext.tsx")},[]);let l=(0,a.useRef)(null),r=(0,a.useRef)(null),n=(0,a.useRef)(t),c=(0,a.useRef)(!0),{path:_,params:d}=(0,er.Z)(),u=(0,a.useRef)(_),h=(0,a.useRef)(d),p=(0,et.Z)(o.deviceType);if(c.current&&(0,ea.ZP)(!0,o.serverData?.trace_id),(0,a.useEffect)(()=>{u.current=_},[_]),(0,a.useEffect)(()=>{h.current=d},[d]),(0,a.useEffect)(()=>{(0,eo.UQ)(),c.current=!1},[]),en(t.pathname)?n.current.pathname!==t.pathname:n.current!==t){n.current=t,r.current=window.performance?.now?window.performance.now():null;let{current:e}=r;if(!c.current){let t=!l.current;(0,ee.A9)("routeStart",{tags:{action:i}}),(0,el.Eg)(t),(0,eo.Ux)(t),(0,eo.on)(),(0,ea._T)(),(0,ea.ZP)(!1);let{defaultBufferSize:s}=(0,el.LH)();e&&((0,ee.A9)("routeStart.defaultBufferSize",{count:s}),l.current={time:e,action:i})}}return(0,E.jsx)(es.Z,{value:p?o:null,children:(0,E.jsx)(ei.Z,{value:l.current,children:e})})}var e_=i(437993),ed=i(712655),eu=i(417394),eh=i(23641);function ep({children:e,immutableLocation:t,routerHistoryAction:i}){let s=(0,a.useRef)(!0),o=(0,a.useRef)(!1),l=(0,a.useRef)(!1),r=(0,a.useRef)(t),n=performance.now(),{group:c}=(0,L.Z)().checkExperiment("web_pwt_validate_suspense");return c&&(0,b.nP)("pwt_logger_v4_render",{sampleRate:1,tags:{experimentGroup:c}}),o.current=o.current||en(t.pathname)?r.current.pathname!==t.pathname:r.current!==t,o.current&&!l.current&&((0,eu.yh)("routeChange"),l.current=!0,(0,e_.N0)(),c&&(0,b.nP)("pwt_logger_v4_route_change_reset",{sampleRate:1,tags:{experimentGroup:c}})),(0,a.useLayoutEffect)(()=>{if((en(t.pathname)?r.current.pathname!==t.pathname:r.current!==t)||s.current){r.current=t;let e=s.current?0:n;(0,eu.ep)(i,e,s.current),(0,eh.Nx)("NavigationCompletev4"),s.current=!1,o.current=!1,l.current=!1,c&&(0,b.nP)("pwt_logger_v4_navigation_complete",{sampleRate:1,tags:{experimentGroup:c}})}},[s,i,t,n,o]),e}function eb({children:e,immutableLocation:t,routerHistoryAction:i}){return((0,a.useEffect)(()=>{(0,s.Z)("PerformanceLoggingRoutingContext","/app/packages/pwt-logger/v4/PerformanceLoggingRoutingContext.tsx")},[]),(0,ed.Z)())?(0,E.jsx)(e_.mW,{children:(0,E.jsx)(ep,{immutableLocation:t,routerHistoryAction:i,children:e})}):e}var eg=i(57887);function em({children:e,traceLoggerData:t}){let i=(0,T.B)(),s=(0,y.ur)(),a=(0,y.TH)(),{group:o}=(0,L.Z)().checkExperiment("web_pwt_validate_suspense"),l=(0,X.Z)({requestContext:i,traceLoggerData:t});return(0,ee.iF)(s),"enabled_switch_v4_v3"===o?(0,E.jsx)(eb,{immutableLocation:a,routerHistoryAction:s,children:(0,E.jsx)(ec,{immutableLocation:a,routerHistoryAction:s,staticContext:l,children:e})}):(0,E.jsx)(ec,{immutableLocation:a,routerHistoryAction:s,staticContext:l,children:(0,E.jsx)(eb,{immutableLocation:a,routerHistoryAction:s,children:e})})}function ef({children:e,context:t,otaData:i,inContextTranslation:o,requestContext:l,resourceCreator:r,traceLoggerData:n}){(0,a.useEffect)(()=>{(0,s.Z)("WebappProvider","/app/packages/WebappProvider.tsx")},[]);let{anyEnabled:c}=(0,L.Z)().checkExperiment("web_pwt_validate_suspense"),_=(0,E.jsx)(H,{children:(0,E.jsx)(V,{children:(0,E.jsx)(U,{children:(0,E.jsx)(F.Z,{children:(0,E.jsx)(Q.nK,{children:(0,E.jsx)(J.g,{children:(0,E.jsx)(Y,{children:(0,E.jsx)(j.Ih,{children:(0,E.jsx)(K.D,{children:(0,E.jsx)(eg.UZ,{resourceCreator:r,children:e})})})})})})})})})});return(0,E.jsx)(Z.E,{value:t,children:c?(0,E.jsx)(em,{traceLoggerData:n,children:(0,E.jsx)($.Z,{enableInContextTranslation:o,locale:l.locale,otaData:i,children:_})}):(0,E.jsx)($.Z,{enableInContextTranslation:o,locale:l.locale,otaData:i,children:(0,E.jsx)(em,{traceLoggerData:n,children:_})})})}var eA=i(914253),ev=i(228612),eP=i(157498);function ey({children:e}){let t=(0,eP.dM)(),i=Object.keys(t).find(e=>void 0!==t[e].login_state),s=i?t[i]:void 0,o=(0,a.useMemo)(()=>(0,N.Z)(s),[s]),l=(0,T.gf)(),{isAuth:r}=o,{isAuthenticated:n}=(0,T.B)();return(0,a.useEffect)(()=>{n!==r&&l({isAuthenticated:r})},[n,r]),(0,E.jsx)(P.$,{value:o,children:e})}function ex({children:e}){let t=(0,L.Z)(),i=(0,ev.JC)(),s=(0,a.useRef)(e=>i[e]);(0,a.useEffect)(()=>{s.current=e=>i[e]},[i]);let o=(0,a.useMemo)(()=>(function({getReduxPin:e,webFastFlushEventsEnabled:t=!1,webAuxDataErrorClassEnabled:i=!1}){let s=new f({webFastFlushEventsEnabled:t,webAuxDataErrorClassEnabled:i});window.addEventListener&&window.addEventListener("focus",()=>{if(!s._clickthroughStartEvent)return;let e=s._clickthroughStartEvent;s._clickthroughStartEvent=null;let t={...e,event_type:4100,duration_ns:(0,d.ZP)()-e.time};s.addEvent(t)}),s._contextLogger._getIndexDBInstance?.()&&s._contextLogger.syncCachedEndEvents?.();let a={flushContextEvents:()=>s.flushEvents(),logContextEvent:t=>{if(null===t.event_type||void 0===t.event_type)return;let i=t.clientTrackingParams||(t=>{try{let i=t?e(t):void 0;return i?`${i.tracking_params??""}~0`:void 0}catch{return}})(t.object_id_str);s.addEvent({...t,clientTrackingParams:i},a.injectSetViewContextDataFromHook)},logImpression:({auxData:e,component:t,eventData:i,eventType:o,impressionType:l,objectIdStr:r,viewData:n,viewParameter:c,viewType:_,element:d})=>{null!=o&&s.addEvent({event_type:o,event_data:{[l]:i},component:t,object_id_str:r,aux_data:e,view_type:_,view_parameter:c,view_data:n,element:d},a.injectSetViewContextDataFromHook)}};return m=(0,p.w)({contextLogger:a}),r.Z.contextLogger=a,a})({getReduxPin:e=>s.current(e),webFastFlushEventsEnabled:t.checkExperiment("cli_fast_flush_events").anyEnabled,webAuxDataErrorClassEnabled:t.checkExperiment("web_aux_data_error_class").anyEnabled}),[t]);return(0,E.jsx)(l.B,{value:o,children:e})}function ew(e){(0,a.useEffect)(()=>{(0,s.Z)("WebappWithReduxProvider","/app/packages/WebappWithReduxProvider.tsx")},[]);let{children:t,reduxStore:i,serverState:l,...n}=e,c=(0,a.useRef)(!1),_=(0,a.useMemo)(()=>new S.ZP,[]);return c.current||(!function(e,t){if(!window)return;let i={},s=(e,s)=>{let a=decodeURIComponent(s),o=new Promise(t=>{i[e]||(i[e]={}),i[e][a]=t});t.add(e,a,o)},a=t=>{let{normalizedResponse:s,options:a,resource:o,response:l,schema:n}=(0,C.Z)(t);l.resource_response.error?408!==l.resource_response.error.http_status&&e.dispatch((0,I.Tl)(o,a,l.resource_response.error)):(r.Z.fetchCompleteCallback&&r.Z.fetchCompleteCallback({resource:o,options:a,response:l,normalizedResponse:s,refresh:!1,resourceSchema:n}),e.dispatch((0,I.Sr)(o,a,l,s,!1,n))),i[o]?.[(0,k.Z)(a)]?.()};window.__PWS_RESOURCE_PENDING_FETCH_HANDLER__=s,window.__PWS_RESOURCE_SSR_HANDLER__=a;let o=Object.keys(window.__PWS_RESOURCE_PENDING_BEFORE_INIT__);o.length&&(o.forEach(e=>{window.__PWS_RESOURCE_PENDING_BEFORE_INIT__[e].forEach(t=>{s(e,t)})}),window.__PWS_RESOURCE_PENDING_BEFORE_INIT__={}),window.__PWS_RESOURCE_DATA_BEFORE_INIT__.length&&(window.__PWS_RESOURCE_DATA_BEFORE_INIT__.forEach(a),window.__PWS_RESOURCE_DATA_BEFORE_INIT__=[])}(i,_),c.current=!0),(0,E.jsx)(ef,{...n,children:(0,E.jsx)(S.F_,{value:_,children:(0,E.jsx)(o.zt,{store:i,children:(0,E.jsx)(eA.fJ,{children:(0,E.jsx)(ev._S,{children:(0,E.jsx)(eP.kY,{children:(0,E.jsx)(ey,{children:(0,E.jsx)(ex,{children:(0,E.jsx)(A.FH,{children:(0,E.jsx)(z,{children:(0,E.jsx)(B,{children:(0,E.jsx)(v.GF,{children:t})})})})})})})})})})})})}},465739:function(e,t,i){i.d(t,{ES:()=>l,I3:()=>o,TY:()=>r,YX:()=>s,aD:()=>a});let s=1e4,a=300,o=[9,3],l={13:"VIEW",4703:"TIMED_PAIR_END",82:"PIN_SAVE_TO_DEVICE",8948:"PIN_CLICK"},r={9:"LOGIN",3:"PIN",186:"OFF_PINTEREST",11:"BROWSER"}},209750:function(e,t,i){let s,a;i.d(t,{li:()=>C,Ch:()=>E,nc:()=>S,a:()=>D,ZP:()=>R,cA:()=>I});var o=i(172045),l=i(430037),r=i(27399),n=i(578382),c=i(11442),_=i(465739);function d(e,t,i){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:s+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let u="exponential";function h(e,t){let i=Math.max(e,0),s=Math.max(t,i);return Math.floor(i+Math.random()*(s-i+1))}class p{constructor(e={}){d(this,"strategy",u),d(this,"attempts",0),this.strategy=e.strategy??u}changeStrategy(e){this.strategy=e,this.attempts=0}next(){let e=function(e,t){if(e===u){let e=1e4*Math.pow(2,t);return h(Math.min(e,9e5),Math.min(Math.floor(1.5*e),9e5))}{let e=Math.max(6e5-6e4*t,0);return Math.max(Math.min(h(e,e*(1+.5*Math.pow(.6,t))),9e5),6e4)}}(this.strategy,this.attempts);return this.attempts+=1,e}}var b=i(71133),g=i(746868),m=i(997776),f=i(730056),A=i(424868),v=i(907049),P=i(762693),y=i(767415);let x=new Set([6945,170,3700]),w=new Set([3700]),E={3829:"articleImpressions",18:"pinImpressions",3700:"boardImpressions",3803:"searchImpressions",170:"storyImpression",3704:"userImpressions"},z=[4700,4701,4702,4703,7042,7043],L=e=>(0,m.Z)(JSON.stringify(e)),T=e=>x.has(e);function k(){let e=new Date;s?s&&s.getUTCDate()!==e.getUTCDate()&&(s=e,(0,c.Z)()):s=e}let I=e=>{let t=e.event_type,i=z.includes(t),s=(0,g.BE)();return!!i||13===t||!!s},C=(e,t)=>{let i=e.event_type,s=z.includes(i),a=(0,g.BE)();return s?e:13===i&&e.view_type?(t?.({viewType:e.view_type,viewParameter:e.view_parameter,viewData:a?.viewData?(0,f.Z)(a.viewData,e.view_data):e.view_data}),e):!a||e.view_type&&e.view_parameter?e:{...e,view_type:a.viewType||e.view_type,view_parameter:a.viewParameter,view_data:e.view_data?(0,f.Z)(e.view_data,a.viewData):a.viewData}},S=(e,t)=>{let{component:i,element:s}=e,a=e.object_id_str,o=e.view_type,l=e.event_type,{appState:r}=e;return(e.event_data?.[t]||[]).map(n=>{var c;let _;return{auxData:e.aux_data,...i?{component:i}:{},eventData:n,...l?{eventType:l}:{},...o?{viewType:o}:{},viewData:e.view_data,viewParameter:e.view_parameter,...a?{objectIdStr:a}:null,impressionType:t,...(c=e.event_data,_={},c?.storyPinProductEventData&&(_={..._,storyPinProductEventData:c.storyPinProductEventData}),_),appState:r,...s?{element:s}:{}}})??[]},D=(e,t)=>({...e.component?{component:e.component}:{},...e.object_id_str?{objectIdStr:e.object_id_str}:null,...e.view_type?{viewType:e.view_type}:{},eventType:e.event_type,auxData:e.aux_data,impressionType:t,viewData:e.view_data,viewParameter:e.view_parameter,eventData:e.event_data});function R(e,t){let i=[],s=[],c=0;function d(){return[...i,...s.reduce((e,t)=>{let i=e.find(e=>e.view_type===t.viewType&&e.view_parameter===t.viewParameter&&e.event_type===t.eventType&&e.object_id_str===t.objectIdStr&&(0,v.Z)(e.view_data,t.viewData));if(i&&!T(t.eventType))t.impressionType in i.event_data?i.event_data[t.impressionType].push(t.eventData):i.event_data[t.impressionType]=[t.eventData];else{let i,s=t.storyPinProductEventData?{storyPinProductEventData:t.storyPinProductEventData}:{},a={appState:t.appState,aux_data:t.auxData||{},clientUUID:(0,o.Z)(),component:t.component,event_data:{...s,[t.impressionType]:!T(i=t.eventType)||T(i)&&w.has(i)?[t.eventData]:{...t.eventData,...(t.eventData||{})[t.impressionType]}},event_type:t.eventType,object_id_str:t.objectIdStr||void 0,time:(0,b.ZP)(),view_data:t.viewData,view_parameter:t.viewParameter,view_type:t.viewType,element:t.element};e.push(a)}return e},[])]}function h({error:e,isError:t,isDroppedEvent:i,isImpression:s,isEventSkipped:a}){let o,r=(0,l.Z)(),n=r?.userAgent||{},c=!(n.isMobile||n.isTablet),_={error_message:e?.message??"unknown",appType:c?"WEB_DENZEL":"WEB_MOBILE",country:r?.country??"unknown",browserName:n.browserName,osName:n.osName,browserType:n.browserType,browserVersion:n.browserVersion,isError:t,isImpression:s,isEventSkipped:a};o=i?"dropped":t?"errors":a?"skipped":"success",(0,y.nP)(`webapp.metrics.contextLog.indexdb.${o}`,{tags:_})}async function g(){try{await a?.clear()}catch(e){h({isError:!0,error:{message:"Error while clearing cache",details:e instanceof Error?e.message:"Unknown error",stack_trace:e instanceof Error?e.stack??"No stack trace available":"No stack trace available",errorName:e instanceof Error?e.name:"N/A"}})}}function m(){i=[],s=[],c=0}async function f(e){try{let t={...e,cache_created_time:(0,b.ZP)(),isImpression:!1,aux_data:{...e.aux_data,is_context_cached:!0}};await a?.setItem((0,o.Z)(),t)}catch(e){h({isError:!0,error:{message:"Transaction could not be added",details:e instanceof Error?e.message:"Unknown error",stack_trace:e instanceof Error?e.stack??"No stack trace available":"No stack trace available",errorName:e instanceof Error?e.name:"N/A"}})}}async function x(e){try{let t={...e,cache_created_time:(0,b.ZP)(),isImpression:!0,auxData:{...e.auxData,is_impression_cached:!0}};await a?.setItem((0,o.Z)(),t)}catch(e){h({isError:!0,isImpression:!0,error:{message:"Transaction could not be added",details:e instanceof Error?e.message:"Unknown error",stack_trace:e instanceof Error?e.stack??"No stack trace available":"No stack trace available",errorName:e instanceof Error?e.name:"N/A"}})}}async function E(){let i,s=d(),a=0,o=new p;if(!s.length)return;let c=(0,b.ZP)();t||(i=r.Z.create("ApiCResource",{events:s,report_time:c}));let h=async()=>{try{c=(0,b.ZP)(),t&&(i=r.Z.create("ApiCResource",{events:s,report_time:c})),await i.callCreate({async:!0,showError:!1}),g()}catch(_){let e=(0,n.hw)(_),i=!e?.api_error_code||[A.dO,A.cZ,A.i1].includes(e.api_error_code),r=e?.api_error_code===A.QY||e?.httpStatus===400;if(!function({retryAttempts:e,error:t,events:i}){let s=(0,l.Z)(),a=s?.userAgent||{},o=!(a.isMobile||a.isTablet),r={...t,retryAttempts:e,appType:o?"WEB_DENZEL":"WEB_MOBILE",country:s?.country??"unknown",browserName:a.browserName,eventSize:i.length,osName:a.osName,browserType:a.browserType,browserVersion:a.browserVersion};(0,y.nP)("metrics_quality_web_retry_error_log",{tags:r})}({retryAttempts:a,error:e,events:s}),t)for(let t of s)t.aux_data={...t.aux_data,error_class:A.qF.get(e?.api_error_code??-1)||"unknown"};if(r)return void g();i||e?.httpStatus&&e.httpStatus>=500?o.changeStrategy("coolDown"):o.changeStrategy(u);let c=o.next();a+=1,setTimeout(h,c)}};h();var f=c;if(e)for(let e of s)(0,b.Q9)(e)&&(0,y.LY)("webapp.contextLogger.fastFlushEvents.latency",(f-e.time||0)/1e6,{sampleRate:1,tags:{event_type:_.ES[e.event_type],view_type:e.view_type?_.TY[e.view_type]:"unknown",cached:(e.aux_data?.is_timed_pair_cached||e.aux_data?.is_context_cached)??"false"}});m(),k()}return{flushContextEvents:E,getContextEvents:d,logContextEvent:function({object_id_str:e,...t}){let s=(0,b.ZP)(),a={aux_data:{},event_data:{},view_data:{},...t,time:s,clientUUID:(0,o.Z)(),...e?{object_id_str:e}:null},l=function(e){if(!e)return e;let{element:t,eventData:i,component:s,objectId:a,view:o,viewParameter:l,viewData:r,durationNs:n,pairId:c,clientTrackingParams:_,...d}=e;return d}(a.aux_data);a={...a,aux_data:l},c+L(a)>20480&&E(),i.push(a),c+=L(a),k(),f(a)},logImpression:function(e){c+L(e)>20480&&E(),s.push(e),c+=L(e),x(e)},resetEventsBuffer:m,syncCachedEndEvents:async function(){try{(await a?.getAllItem()||[]).forEach(e=>{let{value:t}=e,{cache_created_time:a,isImpression:o,...l}=t;(0,b.ZP)()-a>6048e11?h({isDroppedEvent:!0,isError:!1}):(0,b.ZP)()-a<15e9?h({isEventSkipped:!0}):o?(s.push(l),h({isImpression:!0,isError:!1})):(i.push(l),h({isError:!1}))})}catch(e){h({isError:!0,error:{message:"Error while syncing cached events",details:e instanceof Error?e.message:"Unknown error",stack_trace:e instanceof Error?e.stack??"No stack trace available":"No stack trace available",errorName:e instanceof Error?e.name:"N/A"}})}},_getIndexDBInstance:function(){return a},initiateIndexDBCache:function(){window?.indexedDB&&(a=a||new P.Z(window.indexedDB,"ContextLoggingDB","ContextLoggingTable"))}}}},71133:function(e,t,i){i.d(t,{Q9:()=>o,ZP:()=>l,sR:()=>a});var s=i(465739);let a=()=>{let e,t;return"undefined"!==document.hidden?(e="hidden",t="visibilitychange"):"undefined"!==document.msHidden?(e="msHidden",t="msvisibilitychange"):"undefined"!==document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange"),{hidden:e,visibilityChange:t}},o=e=>{switch(e.event_type){case 13:return!!e.view_type&&s.I3.includes(e.view_type);case 4703:if(3===e.view_type&&85===e.component&&(e.duration_ns||0)>=1e10||186===e.view_type||11===e.view_type)return!0;return!1;case 82:case 8948:return!0;default:return!1}},l=()=>1e6*Date.now()},825541:function(e,t,i){i.d(t,{Z:()=>c,d:()=>n});var s=i(686659),a=i(667294),o=i(740097),l=i(24246),r=i(785893);let n=o.J6;function c({children:e}){(0,a.useEffect)(()=>{(0,s.Z)("GestaltDefaultLabelProvider","/app/packages/gestaltExtensions/GestaltDefaultLabelProvider.tsx")},[]);let t=(0,l.Z)(),i=(0,a.useMemo)(()=>({Accordion:{accessibilityCollapseLabel:t.bt("Collapse section", "Collapse section", "gestalt.accordion.accessibilityCollapseLabel", undefined, true),accessibilityExpandLabel:t.bt("Expand section", "Expand section", "gestalt.accordion.accessibilityExpandLabel", undefined, true)},BannerOverlay:{accessibilityDismissButtonLabel:t.bt("Dismiss banner", "Dismiss banner", "gestalt.bannerOverlay.accessibilityDismissButtonLabel", undefined, true)},ActivationCard:{accessibilityDismissButtonLabel:t.bt("Dismiss", "Dismiss", "gestalt.activationCard.accessibilityDismissButtonLabel", undefined, true)},BannerCallout:{accessibilityDismissButtonLabel:t.bt("Dismiss banner", "Dismiss banner", "gestalt.callout.accessibilityDismissButtonLabel", undefined, true),iconAccessibilityLabelError:t.bt("Error", "Error", "gestalt.callout.iconAccessibilityLabelError", undefined, true),iconAccessibilityLabelInfo:t.bt("Information", "Information", "gestalt.callout.iconAccessibilityLabelInfo", undefined, true),iconAccessibilityLabelRecommendation:t.bt("Recommendation", "Recommendation", "gestalt.callout.iconAccessibilityLabelRecommendation", undefined, true),iconAccessibilityLabelWarning:t.bt("Warning", "Warning", "gestalt.callout.iconAccessibilityLabelWarning", undefined, true),iconAccessibilityLabelSuccess:t.bt("Success", "Success", "gestalt.callout.iconAccessibilityLabelSuccess", undefined, true)},BannerSlim:{accessibilityDismissButtonLabel:t.bt("Dismiss banner", "Dismiss banner", "gestalt.slimbanner.accessibilityDismissButtonLabel", undefined, true),iconAccessibilityLabelError:t.bt("Error", "Error", "gestalt.slimbanner.iconAccessibilityLabelError", undefined, true),iconAccessibilityLabelInfo:t.bt("Information", "Information", "gestalt.slimbanner.iconAccessibilityLabelInfo", undefined, true),iconAccessibilityLabelRecommendation:t.bt("Recommendation", "Recommendation", "gestalt.slimbanner.iconAccessibilityLabelRecommendation", undefined, true),iconAccessibilityLabelWarning:t.bt("Warning", "Warning", "gestalt.slimbanner.iconAccessibilityLabelWarning", undefined, true),iconAccessibilityLabelSuccess:t.bt("Success", "Success", "gestalt.slimbanner.iconAccessibilityLabelSuccess", undefined, true),iconAccessibilityLabelDefault:t.bt("Pinterest logo", "Pinterest logo", "gestalt.slimbanner.iconAccessibilityLabelDefault", undefined, true)},ButtonSocial:{textLinkEmail:t.bt("Link account to Email", "Link account to Email", "gestalt.buttonsocial.textLinkEmail", undefined, true),textLinkFacebook:t.bt("Link account to Facebook", "Link account to Facebook", "gestalt.buttonsocial.textLinkFacebook", undefined, true),textLinkGoogle:t.bt("Link account to Google", "Link account to Google", "gestalt.buttonsocial.textLinkGoogle", undefined, true),textLinkApple:t.bt("Link account to Apple", "Link account to Apple", "gestalt.buttonsocial.textLinkApple", undefined, true),textLinkLine:t.bt("Link account to Line", "Link account to Line", "gestalt.buttonsocial.textLinkLine", undefined, true),textLoginEmail:t.bt("Log in with email", "Login with Email", "gestalt.buttonsocial.textLoginEmail", undefined, true),textLoginFacebook:t.bt("Log in with Facebook", "Login with Facebook", "gestalt.buttonsocial.textLoginFacebook", undefined, true),textLoginGoogle:t.bt("Log in with Google", "Login with Google", "gestalt.buttonsocial.textLoginGoogle", undefined, true),textLoginApple:t.bt("Log in with Apple", "Login with Apple", "gestalt.buttonsocial.textLoginApple", undefined, true),textLoginLine:t.bt("Log in with Line", "Login with Line", "gestalt.buttonsocial.textLoginLine", undefined, true),textContinueEmail:t.bt("Continue with email", "Continue with Email", "gestalt.buttonsocial.textContinueEmail", undefined, true),textContinueFacebook:t.bt("Continue with Facebook", "Continue with Facebook", "gestalt.buttonsocial.textContinueFacebook", undefined, true),textContinueGoogle:t.bt("Continue with Google", "Continue with Google", "gestalt.buttonsocial.textContinueGoogle", undefined, true),textContinueApple:t.bt("Continue with Apple", "Continue with Apple", "gestalt.buttonsocial.textContinueApple", undefined, true),textContinueLine:t.bt("Continue with Line", "Continue with Line", "gestalt.buttonsocial.textContinueLine", undefined, true),textSignupEmail:t.bt("Sign up with email", "Sign up with Email", "gestalt.buttonsocial.textSignupEmail", undefined, true),textSignupFacebook:t.bt("Sign up with Facebook", "Sign up with Facebook", "gestalt.buttonsocial.textSignupFacebook", undefined, true),textSignupGoogle:t.bt("Sign up with Google", "Sign up with Google", "gestalt.buttonsocial.textSignupGoogle", undefined, true),textSignupApple:t.bt("Sign up with Apple", "Sign up with Apple", "gestalt.buttonsocial.textSignupApple", undefined, true),textSignupLine:t.bt("Sign up with Line", "Sign up with Line", "gestalt.buttonsocial.textSignupLine", undefined, true)},ChartGraph:{accessibilityLabelPrefixText:t.bt("Chart graph.", "Chart graph.", "gestalt.chartgraph.accessibilityLabelPrefixText", undefined, true),defaultViewText:t.bt("Default view mode", "Default view mode", "gestalt.chartgraph.defaultViewText", undefined, true),accessibleViewText:t.bt("Visual pattern view", "Visual pattern view", "gestalt.chartgraph.accessibleViewText", undefined, true),tabularData:t.bt("Tabular representation", "Tabular representation", "gestalt.chartgraph.tabularData", undefined, true),accessibilityLabelDismissModal:t.bt("Dismiss tabular representation modal", "Dismiss tabular representation modal", "gestalt.chartgraph.accessibilityLabelDismissModal", undefined, true),tableSeriesText:t.bt("Series", "Series", "gestalt.chartgraph.tableSeriesText", undefined, true),tableXAxisText:t.bt("x-axis values", "x-axis values", "gestalt.chartgraph.tableXAxisText", undefined, true),tableYAxisText:t.bt("y-axis values", "y-axis values", "gestalt.chartgraph.accessibilityLabelPrefixText", undefined, true),downloadCsvButtonText:t.bt("Download as .csv", "Download as .csv", "gestalt.chartgraph.downloadCsvButtonText", undefined, true),cancelButtonText:t.bt("Cancel", "Cancel", "gestalt.chartgraph.cancelButtonText", undefined, true)},ComboBox:{noResultText:t.bt("No results", "No results", "gestalt.comboBox.noResultsText", undefined, true),accessibilityClearButtonLabel:t.bt("Clear input", "Clear input", "gestalt.comboBox.accessibilityClearButtonLabel", undefined, true)},DatePicker:{accessibilityDismissButtonLabel:t.bt("Dismiss date picker", "Dismiss date picker", "gestalt.datepicker.accessibilityDismissButtonLabel", undefined, true),dismissButton:t.bt("Close", "Close", "gestalt.datepicker.dismissButton", undefined, true),openCalendar:t.bt("Open calendar", "Open calendar", "gestalt.datepicker.openCalendar", undefined, true),previousMonth:t.bt("Navigate to previous month", "Navigate to previous month", "gestalt.datepicker.previousMonth", undefined, true),nextMonth:t.bt("Navigate to next month", "Navigate to next month", "gestalt.datepicker.nextMonth", undefined, true)},DateRange:{applyText:t.bt("Apply", "Apply", "gestalt.daterange.apply", undefined, true),cancelText:t.bt("Cancel", "Cancel", "gestalt.daterange.cancel", undefined, true)},HelpButton:{tooltipMessage:t.bt("Click to learn more", "Click to learn more", "gestalt.helpButton.tooltipMessage", undefined, true)},Link:{accessibilityNewTabLabel:t.bt("Opens a new tab", "Opens a new tab", "gestalt.linkRoleComponent.accessibilityNewTabLabel", undefined, true),accessibilityDownloadLabel:t.bt("Downloads a file", "Downloads a file", "gestalt.linkRoleComponent.accessibilityDownloadLabel", undefined, true)},Modal:{accessibilityDismissButtonLabel:t.bt("Dismiss modal", "Dismiss modal", "gestalt.modal.accessibilityDismissButtonLabel", undefined, true)},Popover:{accessibilityDismissButtonLabel:t.bt("Dismiss popover", "Dismiss popover", "gestalt.popover.accessibilityDismissButtonLabel", undefined, true)},OverlayPanel:{accessibilityDismissButtonLabel:t.bt("Dismiss overlay panel", "Dismiss overlay panel", "gestalt.overlaypanel.accessibilityDismissButtonLabel", undefined, true),dismissConfirmationMessage:t.bt("Are you sure you want to dismiss?", "Are you sure you want to dismiss?", "gestalt.sheet.dismissConfirmationMessage", undefined, true),dismissConfirmationSubtext:t.bt("You will lose all of your changes. This cannot be undone", "You will lose all of your changes. This cannot be undone", "gestalt.sheet.dismissConfirmationSubtext", undefined, true),dismissConfirmationPrimaryActionText:t.bt("Yes, dismiss", "Yes, dismiss", "gestalt.sheet.dismissConfirmationPrimaryActionText", undefined, true),dismissConfirmationPrimaryActionTextLabel:t.bt("Yes, dismiss the overlay panel", "Yes, dismiss the overlay panel", "gestalt.overlaypanel.dismissConfirmationPrimaryActionTextLabel", undefined, true),dismissConfirmationSecondaryActionText:t.bt("No, go back", "No, go back", "gestalt.sheet.dismissConfirmationSecondaryActionText", undefined, true),dismissConfirmationSecondaryActionTextLabel:t.bt("No, go back to the sheet", "No, go back to the sheet", "gestalt.sheet.dismissConfirmationSecondaryActionTextLabel", undefined, true)},SheetMobile:{accessibilityDismissButtonLabel:t.bt("Dismiss bottom sheet", "Dismiss bottom sheet", "gestalt.sheetmobile.dismissButtonAccessibilityLabel", undefined, true),accessibilityGrabberLabel:t.bt("Grabber", "Grabber", "gestalt.sheetmobile.grabberAccessibilityLabel", undefined, true),accessibilityLabel:t.bt("Bottom sheet", "Bottom sheet", "gestalt.sheetmobile.accessibilityLabel", undefined, true)},SideNavigation:{accessibilityDismissButtonLabel:t.bt("Dismiss side navigation.", "Dismiss side navigation.", "gestalt.sidenavigation.accessibilityDismissButtonLabel", undefined, true),accessibilityCollapseButtonLabel:t.bt("Collapse side navigation panel.", "Collapse side navigation panel.", "gestalt.sidenavigation.accessibilityCollapseButtonLabel", undefined, true),accessibilityExpandButtonLabel:t.bt("Expand side navigation panel.", "Expand side navigation panel.", "gestalt.sidenavigation.accessibilityExpandButtonLabel", undefined, true),accessibilityEllipsisLabel:t.bt("Section.", "Section.", "gestalt.sidenavigation.accessibilityEllipsisLabel", undefined, true)},Spinner:{accessibilityLabel:t.bt("Loading", "Loading", "gestalt.spinner.accessibilityLabel", undefined, true)},TableOfContents:{accessibilityLabel:t.bt("Table of contents", "Table of contents", "gestalt.tableOfContents.accessibilityLabel", undefined, true)},Tabs:{accessibilityNotificationLabel:t.bt("This tab is displaying a notification indicator", "This tab is displaying a notification indicator", "gestalt.tab.accessibilityNotificationLabel", undefined, true)},Tag:{accessibilityErrorIconLabel:t.bt("Error", "Error", "gestalt.tag.accessibilityErrorIconLabel", undefined, true),accessibilityRemoveIconLabel:t.bt("Remove tag", "Remove tag", "gestalt.tag.accessibilityRemoveIconLabel", undefined, true),accessibilityWarningIconLabel:t.bt("Warning", "Warning", "gestalt.tag.accessibilityWarningIconLabel", undefined, true)},TagData:{accessibilityRemoveIconLabel:t.bt("Remove tag", "Remove tag", "gestalt.tagData.accessibilityRemoveIconLabel", undefined, true)},TextField:{accessibilityHidePasswordLabel:t.bt("Hide password", "Hide password", "gestalt.textField.accessibilityHidePasswordLabel", undefined, true),accessibilityShowPasswordLabel:t.bt("Show password", "Show password", "gestalt.textField.accessibilityShowPasswordLabel", undefined, true)},Toast:{accessibilityDismissButtonLabel:t.bt("Dismiss message", "Dismiss message", "gestalt.toast.accessibilityDismissButtonLabel", undefined, true),accessibilityIconSuccessLabel:t.bt("Success message", "Success message", "gestalt.toast.accessibilityIconSuccessLabel", undefined, true),accessibilityIconErrorLabel:t.bt("Error message", "Error message", "gestalt.toast.accessibilityIconErrorLabel", undefined, true),accessibilityProcessingLabel:t.bt("Processing message", "Processing message", "gestalt.toast.accessibilityProcessingLabel", undefined, true)},BannerUpsell:{accessibilityDismissButtonLabel:t.bt("Dismiss banner", "Dismiss banner", "gestalt.upsell.accessibilityDismissButtonLabel", undefined, true)},Video:{accessibilityMaximizeLabel:t.bt("Maximise", "Maximize", "gestalt.video.accessibilityMaximizeLabel", undefined, true),accessibilityMinimizeLabel:t.bt("Minimise", "Minimize", "gestalt.video.accessibilityMinimizeLabel", undefined, true),accessibilityMuteLabel:t.bt("Mute", "Mute", "gestalt.video.accessibilityMuteLabel", undefined, true),accessibilityPauseLabel:t.bt("Pause", "Pause", "gestalt.video.accessibilityPauseLabel", undefined, true),accessibilityPlayLabel:t.bt("Play", "Play", "gestalt.video.accessibilityPlayLabel", undefined, true),accessibilityProgressLabel:t.bt("Video progress", "Video progress", "gestalt.video.accessibilityProgressLabel", undefined, true),accessibilityUnmuteLabel:t.bt("Unmute", "Unmute", "gestalt.video.accessibilityUnmuteLabel", undefined, true),accessibilityHideCaptionsLabel:t.bt("Hide captions", "Hide captions", "gestalt.video.accessibilityHideCaptionsLabel", undefined, true),accessibilityShowCaptionsLabel:t.bt("Show captions", "Show captions", "gestalt.video.accessibilityShowCaptionsLabel", undefined, true)},SearchField:{accessibilityClearButtonLabel:t.bt("Clear input", "Clear input", "gestalt.searchfield.accessibilityClearButtonLabel", undefined, true)},Attribution:{textSponsored:t.bt("Sponsored", "Sponsored", "gestalt.attribution.textSponsored", undefined, true),accessibilityVerifiedMerchant:t.bt("Verified merchant", "Verified merchant", "gestalt.attribution.accessibilityVerifiedMerchant", undefined, true),accessibilityVerifiedPinner:t.bt("Verified Pinner", "Verified Pinner", "gestalt.attribution.accessibilityVerifiedPinner", undefined, true)}}),[t]);return(0,r.jsx)(o.J6,{labels:i,children:e})}},651263:function(e,t,i){i.d(t,{T:()=>s,Z:()=>o});let{Provider:s,get:a}=(0,i(213491).Z)("NotificationContext"),o=a},762693:function(e,t,i){i.d(t,{Z:()=>s});class s{constructor(e,t="myDatabase",i="myStore"){var s,a,o;s="cache",a=new Map,(s="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(s,"string"))?o:o+"")in this?Object.defineProperty(this,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):this[s]=a,this.dbName=t,this.storeName=i,this.dbPromise=(async()=>{try{return await this.initializeDB(e)}catch{return null}})()}async initializeDB(e){return new Promise((t,i)=>{try{let s=e.open(this.dbName,1);s.onerror=()=>{i(Error("IndexedDB initialization error: "+s.error))},s.onupgradeneeded=()=>{let e=s.result;e.objectStoreNames.contains(this.storeName)||e.createObjectStore(this.storeName,{keyPath:"key"})},s.onsuccess=()=>{t(s.result)}}catch(e){i(Error("IndexedDB initialization error: "+e))}})}async reopenDatabaseIfClosed(){let e=await this.dbPromise;return e&&!e.close?e:(this.dbPromise=this.initializeDB(window.indexedDB),this.dbPromise)}async getObjectStore(e="readwrite"){let t=await this.reopenDatabaseIfClosed();return t?t.transaction(this.storeName,e).objectStore(this.storeName):null}async getItem(e){if(this.cache.has(e))return this.cache.get(e)??null;let t=await this.getObjectStore();return t?new Promise((i,s)=>{let a=t.get(e);a.onerror=()=>s(a.error),a.onsuccess=()=>{let t=a.result?.value||null;null!==t&&this.cache.set(e,t),i(t)}}):null}async getAllItem(){let e=await this.getObjectStore();return e?new Promise((t,i)=>{let s=e.getAll();s.onerror=()=>i(s.error),s.onsuccess=()=>{s.result?.forEach(e=>{this.cache.set(e.key,e.value)}),t(s.result)}}):null}async setItem(e,t){this.cache.set(e,t);let i=await this.getObjectStore();return i?new Promise((s,a)=>{let o=i.put({key:e,value:t});o.onerror=()=>{a(o.error)},o.onsuccess=()=>{s(null)}}):null}async removeItem(e){this.cache.delete(e);let t=await this.getObjectStore();return t?new Promise((i,s)=>{let a=t.delete(e);a.onerror=()=>s(a.error),a.onsuccess=()=>i(null)}):null}async clear(){this.cache.clear();let e=await this.getObjectStore();return e?new Promise((t,i)=>{let s=e.clear();s.onerror=()=>i(s.error),s.onsuccess=()=>t(null)}):null}}},209045:function(e,t,i){let s;i.d(t,{w:()=>b});var a=i(430037),o=i(71133),l=i(762693),r=i(141483),n=i(629724),c=i(767415);function _(e,t,i){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:s+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let d=null,u="ACTIVE",h="PAUSED",p=()=>window&&window.performance&&window.performance.now?`(Time: ${(window.performance.now()/1e3).toFixed(3)}s)`:"";function b({contextLogger:e}){if(s||(s=window?.indexedDB?new l.Z(window.indexedDB,"EventLoggingDB","TimeSpent"):null),d)return d;let t=new Map,i=(0,n.Z)()&&(0,n.Z)().debug_timespent,b=[],g=i?console:{error:(...e)=>{},log:(...e)=>{},group:(...e)=>{},groupEnd:(...e)=>{}};return console.group||(g.group=(...e)=>console.log(...e),g.groupEnd=(...e)=>{}),d=new class{constructor(){_(this,"appTimedPair",null),_(this,"clickthroughProperties",null),_(this,"historyStackContext",null),_(this,"offsiteTimedPair",null),_(this,"offsiteTimedPairForegroundId",null),_(this,"pins",Object.freeze({})),_(this,"addEventListeners",()=>{var e;let t,{hidden:i,visibilityChange:s}=(0,o.sR)(),a=e=>{document[i]?this.unregisterApp(void 0,e):this.registerApp()};s&&document.addEventListener(s,a,!1),window.addEventListener("focus",this.registerApp),window.addEventListener("blur",e=>this.unregisterApp(void 0,e));let l=(e=e=>this.unregisterApp(void 0,e),t=!1,(...i)=>{t||(t=!0,e(...i))});window.addEventListener("beforeunload",l),window.addEventListener("pagehide",l);let r=navigator&&navigator.userAgent.toLowerCase();r&&r.includes("macintosh")&&r.includes("chrome")&&window.addEventListener("popstate",()=>{document.hasFocus()||document[i]||(0,c.nP)("chrome_mac_back_forward_button",{sampleRate:1})})}),_(this,"storeClickthroughProperties",e=>{this.clickthroughProperties&&(0,c.nP)("webapp.metrics.clickthroughs.overwritten",{sampleRate:1,tags:{previousView:this.clickthroughProperties.view_type,previousViewParameter:this.clickthroughProperties.view_parameter,nextView:e.view_type,nextViewParameter:e.view_parameter}}),this.clickthroughProperties={time:(0,o.ZP)(),...e}}),_(this,"clearClickthroughProperties",()=>{this.clickthroughProperties=null,this.offsiteTimedPair=null,this.offsiteTimedPairForegroundId=null}),_(this,"registerApp",()=>{g.group("App Foreground",p()),null==this.appTimedPair?(this.appTimedPair=new r.Z,this.appTimedPair.start(),this._unpauseAllComponents(),this._endOffsiteTimedPair(),null!==this.appTimedPair&&void 0!==this.appTimedPair&&e.logContextEvent({event_type:4700,pair_id:this.appTimedPair.uuid})):g.error("TimedPair already exists for app."),g.groupEnd()}),_(this,"logIndexDbStatLog",({error:e,isError:t,isDroppedEvent:i})=>{let s,o=(0,a.Z)(),l=o?.userAgent||{},r=!(l.isMobile||l.isTablet),n={error_message:e?.message??"unknown",appType:r?"WEB_DENZEL":"WEB_MOBILE",country:o?.country??"unknown",browserName:l.browserName,osName:l.osName,browserType:l.browserType,browserVersion:l.browserVersion,isError:t,errorName:e?.errorName??"unknown",errorDetails:e?.details??"unknown",errorStackTrace:e?.stack_trace??"unknown"};s=i?"dropped":t?"errors":"success",(0,c.nP)(`webapp.metrics.timespent.indexdb.${s}`,{tags:n})}),_(this,"unregisterApp",(t=!1,i)=>{g.group("App Background",p());let{appTimedPair:s}=this;if(null!=s){this._pauseAllComponents();let t=s.end();this._startOffsiteTimedPair(),e.logContextEvent({event_type:4701,duration_ns:t,pair_id:s.uuid}),this.appTimedPair=null}else g.error("No TimedPair found for app.");let a=["beforeunload","pagehide"],o=a.includes(i?.type||""),l=a.includes(i?.pauseReason||"");(o||l)&&this._endOffsiteTimedPair(),t||e.flushContextEvents(),g.groupEnd()}),_(this,"_activateComponent",t=>{g.group("Activating component",p()),i&&g.log(t.getContext());let s=t.getTimedPair();if(s){s.start();let{view:i,viewParameter:a,component:o,element:l,objectId:r,clientTrackingParams:n}=t.getLoggerContext();e.logContextEvent({event_type:4702,view_type:i,view_parameter:a,component:o,element:l,object_id_str:r,view_data:t.props.viewData,pair_id:s.uuid,clientTrackingParams:n,aux_data:{time_spent_foreground_pairid:this.appTimedPair&&this.appTimedPair.uuid,time_spent_parent_pairid:t.getParentId(),...t.props.auxData}})}g.groupEnd()}),_(this,"_deactivateComponent",t=>{g.group("Deactivating component",p()),i&&g.log(t.getContext());let s=t.getTimedPair();if(s){let{view:i,viewParameter:a,component:o,element:l,objectId:r,clientTrackingParams:n}=s,c=s.end();e.logContextEvent({event_type:4703,view_type:i,view_parameter:a,component:o,element:l,object_id_str:r,view_data:t.props.viewData,duration_ns:c,pair_id:s.uuid,clientTrackingParams:n,aux_data:{time_spent_foreground_pairid:this.appTimedPair&&this.appTimedPair.uuid,time_spent_parent_pairid:t.getParentId(),...t.props.auxData}})}g.groupEnd()}),_(this,"_startOffsiteTimedPair",()=>{this.clickthroughProperties&&(this.offsiteTimedPair=new r.Z({view:186,viewParameter:this.clickthroughProperties.view_parameter,objectId:this.clickthroughProperties.object_id_str}),this.offsiteTimedPair.start(),this.offsiteTimedPairForegroundId=this.appTimedPair?this.appTimedPair.uuid:null,this.clickthroughProperties={...this.clickthroughProperties,aux_data:{...this.clickthroughProperties.aux_data,time_to_offsite:void 0!==this.clickthroughProperties.time&&null!==this.clickthroughProperties.time&&"number"==typeof this.clickthroughProperties.time?(0,o.ZP)()-this.clickthroughProperties.time:void 0}},e.logContextEvent({...this.clickthroughProperties,event_type:4702,view_type:186,pair_id:this.offsiteTimedPair?this.offsiteTimedPair.uuid:null,aux_data:{...this.clickthroughProperties.aux_data,time_spent_foreground_pairid:this.offsiteTimedPairForegroundId}}),this._addOffSitePairToIndexDB({offsiteTimedPairUUID:this.offsiteTimedPair?.uuid,clickthroughProperties:this.clickthroughProperties,timeCreated:this.offsiteTimedPair?.startTime,offsiteTimedPairForegroundId:this.offsiteTimedPairForegroundId}))}),_(this,"_endOffsiteTimedPair",()=>{let{offsiteTimedPair:t,clickthroughProperties:i}=this;if(t&&i){let s=t.end();e.logContextEvent({...i,event_type:4703,view_type:186,pair_id:this.offsiteTimedPair?this.offsiteTimedPair.uuid:null,aux_data:{...i.aux_data,time_spent_foreground_pairid:this.offsiteTimedPairForegroundId},duration_ns:s}),this._removeOffSitePairByIdFromIndexDB(this.offsiteTimedPair?.uuid),this._syncCachedTimedPairEndEvents(),this._onOffsiteEnd(),this.clearClickthroughProperties()}else this._syncCachedTimedPairEndEvents()}),_(this,"_addOffSitePairToIndexDB",async({offsiteTimedPairUUID:e,clickthroughProperties:t,timeCreated:i,offsiteTimedPairForegroundId:a})=>{try{await s?.setItem(e,{clickthroughProperties:{...t},timeCreated:i,offsiteTimedPairForegroundId:a})}catch(e){this.logIndexDbStatLog({isError:!0,error:{message:"Transaction could not be added",details:e instanceof Error?e.message:"Unknown error",stack_trace:e instanceof Error?e.stack??"No stack trace available":"No stack trace available",errorName:e instanceof Error?e.name:"N/A"}})}}),_(this,"_addAppTimerToIndexDB",async({foregroundAppTimerUUID:e,timeCreated:t})=>{try{await s?.setItem(e,{timeCreated:t})}catch(e){this.logIndexDbStatLog({isError:!0,error:{message:"Transaction could not be added",details:e instanceof Error?e.message:"Unknown error",stack_trace:e instanceof Error?e.stack??"No stack trace available":"No stack trace available",errorName:e instanceof Error?e.name:"N/A"}})}}),_(this,"_removeAppTimerFromIndexDB",async({foregroundAppTimerUUID:e})=>{try{if(!e)return;await s?.removeItem(e)}catch(e){this.logIndexDbStatLog({isError:!0,error:{message:"Transaction could not be removed",details:e instanceof Error?e.message:"Unknown error",stack_trace:e instanceof Error?e.stack??"No stack trace available":"No stack trace available",errorName:e instanceof Error?e.name:"N/A"}})}}),_(this,"_removeOffSitePairByIdFromIndexDB",async e=>{try{if(!e)return;await s?.removeItem(e)}catch(e){this.logIndexDbStatLog({isError:!0,error:{message:"Transaction could not be removed",details:e instanceof Error?e.message:"Unknown error",stack_trace:e instanceof Error?e.stack??"No stack trace available":"No stack trace available",errorName:e instanceof Error?e.name:"N/A"}})}}),_(this,"_syncCachedTimedPairEndEvents",async()=>{try{(await s?.getAllItem()||[]).forEach(async t=>{let{key:i,value:s}=t,{clickthroughProperties:a,timeCreated:o,offsiteTimedPairForegroundId:l}=s,n=(0,r.h)();o&&(0,r.h)()-o>864e11?this.logIndexDbStatLog({isDroppedEvent:!0,isError:!1}):(e.logContextEvent({...a,event_type:4703,view_type:186,pair_id:i||null,aux_data:{...a?.aux_data,time_spent_foreground_pairid:l,is_timed_pair_cached:!0},duration_ns:o?n-o:null}),this.logIndexDbStatLog({isError:!1}))}),await s?.clear()}catch(e){this.logIndexDbStatLog({isError:!0,error:{message:"Error while syncing cached events",details:e instanceof Error?e.message:"Unknown error",stack_trace:e instanceof Error?e.stack??"No stack trace available":"No stack trace available",errorName:e instanceof Error?e.name:"N/A"}})}}),_(this,"_onOffsiteEnd",()=>{g.group("Trigger onOffsiteEndCallbacks"),b.forEach(e=>e({appTimedPair:this.appTimedPair,clickthroughProperties:this.clickthroughProperties,offsiteTimedPair:this.offsiteTimedPair,offsiteTimedPairForegroundId:this.offsiteTimedPairForegroundId})),g.groupEnd()}),_(this,"_pauseAllComponents",()=>{g.group("Pause all components"),t.forEach((e,t,i)=>{e===u&&this._deactivateComponent(t),i.set(t,h)}),g.groupEnd()}),_(this,"_unpauseAllComponents",()=>{g.group("Unpause all components"),t.forEach((e,i)=>{let s=new r.Z(i.getLoggerContext());i.setTimedPair(s,()=>{t.set(i,u),this._activateComponent(i)})}),g.groupEnd()})}setHistoryStackContext(e){this.historyStackContext=e}setPins(e){this.pins=e}startOffsiteRightClickTimedPair(t=!1){this._startOffsiteTimedPair(),t||e.flushContextEvents()}registerComponent(e){null===this.appTimedPair?t.set(e,h):(t.set(e,u),this._activateComponent(e))}unregisterComponent(e){t.get(e)===u&&(this._deactivateComponent(e),e.setTimedPair(new r.Z(e.getLoggerContext()))),t.delete(e)}size(){return t.size}onOffsiteEnd(e){b.push(e)}removeOnOffsiteEnd(e){let t=b.indexOf(e);t>-1&&b.splice(t,1)}_getIndexDBInstance(){return s}_getContextLogger(){return e}_clearTimeSpentManager(){this.appTimedPair=null,this.offsiteTimedPairForegroundId=null,d=null}_clearIndexDB(){s?.clear(),s=null}}}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/44540.en_GB-5e90a71ea2e0a425.mjs.map